<UserControl
    x:Class="DominatorUIUtility.Views.SocioPublisher.PublisherRssFeed"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:customControl="clr-namespace:DominatorUIUtility.Views.SocioPublisher.CustomControl"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:suggestions="clr-namespace:DominatorUIUtility.Views.SocioPublisher.Suggestions"
    mc:Ignorable="d">
    <UserControl.Resources>
        <suggestions:SuggestionProvider x:Key="MacrosSuggestionProvider" />
        <DataTemplate x:Key="MacroTemplate">
            <Grid>
                <TextBlock Text="{Binding Path=Key}" />
            </Grid>
        </DataTemplate>
    </UserControl.Resources>
    <StackPanel x:Name="MainGrid" Margin="10">
        <StackPanel Margin="0,0,0,5" Orientation="Horizontal">
            <StackPanel>
                <GroupBox>

                    <GroupBox.Header>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock
                                VerticalAlignment="Center"
                                Foreground="White"
                                Text="{DynamicResource LangKeyFeedUrlDetails}" />

                            <Button
                                Name="BtnClear"
                                Grid.Column="1"
                                Margin="1"
                                HorizontalAlignment="Right"
                                Background="Transparent"
                                Command="{Binding ClearCommand}"
                                CommandParameter="{Binding ElementName=BtnClear}"
                                Foreground="White">
                                <Button.Content>
                                    <Canvas
                                        Width="15"
                                        Height="15"
                                        HorizontalAlignment="Right"
                                        Clip="F1 M 0,0L 48,0L 48,48L 0,48L 0,0">
                                        <Path
                                            Width="15.7781"
                                            Height="15.7781"
                                            Data="F1 M 58.5833,45.9167L 58.5833,57L 19,57L 19,45.9167L 28.8998,45.9167C 31.0306,47.2793 33.6795,48.4476 36.6434,49.2418C 40.3467,50.2341 44.7079,50.4746 47.6249,50.0692L 47.6249,45.9167L 58.5833,45.9167 Z M 56.2083,48.2917L 53.4374,48.2917L 53.4374,53.0417L 56.2082,53.0417L 56.2083,48.2917 Z M 45.7433,48.2824C 43.1578,48.6418 39.9938,48.0327 36.7113,47.1532C 31.1866,45.6728 26.8965,42.7258 25.5163,39.7952L 32.2902,33.0213L 45.7433,38.0663L 45.7433,48.2824 Z M 39.2905,28.1719C 39.6351,28.1719 39.9737,28.1941 40.3047,28.2368L 46.0048,17.0498L 49.0712,18.6122L 43.5443,29.4594C 45.1454,30.5622 46.1735,32.2733 46.1735,34.1946C 46.1735,35.0197 45.9839,35.806 45.6407,36.5221L 33.4151,31.7762C 34.4796,29.6541 36.4722,28.1719 39.2905,28.1719 Z "
                                            Fill="Gainsboro"
                                            Stretch="Fill" />
                                    </Canvas>
                                </Button.Content>
                            </Button>
                        </Grid>
                    </GroupBox.Header>

                    <StackPanel>
                        <TextBox
                            Width="400"
                            Height="50"
                            AcceptsReturn="True"
                            Background="Transparent"
                            Text="{Binding PublisherRssFeedModel.FeedUrl}"
                            TextWrapping="Wrap" />

                        <StackPanel Margin="2">
                            <TextBlock
                                VerticalAlignment="Center"
                                FontSize="12"
                                FontWeight="SemiBold"
                                Text="{DynamicResource LangKeyPostDescription}" />
                            <customControl:SocinatorTextBox
                                Margin="2"
                                DisplayMember="Key"
                                MacroTemplate="{StaticResource ResourceKey=MacroTemplate}"
                                SuggestionProvider="{StaticResource ResourceKey=MacrosSuggestionProvider}"
                                Text="{Binding PublisherRssFeedModel.FeedTemplate, Mode=TwoWay}"
                                TextHeight="60"
                                TextWidth="300"
                                TextWrapping="Wrap"
                                Watermark="{DynamicResource LangKeyWhatsOnYourMind}">
                                <customControl:SocinatorTextBox.LoadingContent>
                                    <TextBlock
                                        Margin="5"
                                        FontSize="14"
                                        Text="Loading Macros..." />
                                </customControl:SocinatorTextBox.LoadingContent>
                            </customControl:SocinatorTextBox>
                            <customControl:PostContent
                                x:Name="PostContentControl"
                                customControl:MediaViewerAssist.CurrentMediaPointer="{Binding PublisherRssFeedModel.PostDetailsModel.MediaViewer.CurrentItem}"
                                customControl:MediaViewerAssist.CurrentMediaUrl="{Binding PublisherRssFeedModel.PostDetailsModel.MediaViewer.MediaUrl, Mode=TwoWay}"
                                customControl:MediaViewerAssist.DeleteMenu="Visible"
                                customControl:MediaViewerAssist.MediaHeight="75"
                                customControl:MediaViewerAssist.MediaList="{Binding PublisherRssFeedModel.PostDetailsModel.MediaViewer.MediaList, Mode=TwoWay}"
                                customControl:MediaViewerAssist.MediaWidth="75"
                                customControl:MediaViewerAssist.TotalMediaCount="{Binding PublisherRssFeedModel.PostDetailsModel.MediaViewer.TotalItem}"
                                FdCondition="{Binding PublisherRssFeedModel.PostDetailsModel.FdCondition, Mode=TwoWay}"
                                FdSellLocation="{Binding PublisherRssFeedModel.PostDetailsModel.FdSellLocation, Mode=TwoWay}"
                                FdSellPrice="{Binding PublisherRssFeedModel.PostDetailsModel.FdSellPrice, Mode=TwoWay}"
                                FdSellProductTitle="{Binding PublisherRssFeedModel.PostDetailsModel.FdSellProductTitle, Mode=TwoWay}"
                                IsChangeHashOfMedia="{Binding PublisherRssFeedModel.PostDetailsModel.IsChangeHashOfMedia, Mode=TwoWay}"
                                IsFdSellPost="{Binding PublisherRssFeedModel.PostDetailsModel.IsFdSellPost, Mode=TwoWay}"
                                IsSpinTax="{Binding PublisherRssFeedModel.PostDetailsModel.IsSpinTax, Mode=TwoWay}"
                                PdSourceUrl="{Binding PublisherRssFeedModel.PostDetailsModel.PdSourceUrl, Mode=TwoWay}"
                                PublisherInstagramTitle="{Binding PublisherRssFeedModel.PostDetailsModel.PublisherInstagramTitle, Mode=TwoWay}"
                                PublisherPostSettings="{Binding PublisherRssFeedModel.PostDetailsModel.PublisherPostSettings, Mode=TwoWay}" />
                        </StackPanel>
                    </StackPanel>
                </GroupBox>

            </StackPanel>

            <GroupBox
                Width="400"
                Margin="10,0"
                HorizontalAlignment="Left"
                Header="{DynamicResource LangKeyFeedUrlDetails}">
                <GroupBox.Style>
                    <Style BasedOn="{StaticResource {x:Type GroupBox}}" TargetType="GroupBox">
                        <Setter Property="Visibility" Value="Visible" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding LstFeedUrl.Count}" Value="0">
                                <Setter Property="Visibility" Value="Collapsed" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </GroupBox.Style>
                <ItemsControl
                    Name="UrlFeedItems"
                    MaxHeight="390"
                    ItemsSource="{Binding LstFeedUrl}">
                    <ItemsControl.Template>
                        <ControlTemplate>
                            <ScrollViewer x:Name="ScrollViewer" Padding="{TemplateBinding Padding}">
                                <ItemsPresenter />
                            </ScrollViewer>
                        </ControlTemplate>
                    </ItemsControl.Template>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="100" />
                                </Grid.ColumnDefinitions>
                                <TextBlock
                                    Margin="4"
                                    Text="{Binding FeedUrl}"
                                    TextWrapping="Wrap" />
                                <StackPanel
                                    Grid.Column="1"
                                    Margin="4"
                                    VerticalAlignment="Center"
                                    Orientation="Horizontal">
                                    <Button
                                        Name="BtnEdit"
                                        Width="40"
                                        Height="25"
                                        VerticalAlignment="Top"
                                        Background="{DynamicResource AccentBaseColorBrush}"
                                        Command="{Binding ElementName=UrlFeedItems, Path=DataContext.EditCommand}"
                                        CommandParameter="{Binding ElementName=BtnEdit}">
                                        <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
                                            <Rectangle
                                                Width="15"
                                                Height="15"
                                                Fill="White">
                                                <Rectangle.OpacityMask>
                                                    <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_edit_box}" />
                                                </Rectangle.OpacityMask>
                                            </Rectangle>
                                        </StackPanel>
                                    </Button>
                                    <Button
                                        Name="BtnDelete"
                                        Width="40"
                                        Height="25"
                                        Margin="10,0"
                                        VerticalAlignment="Top"
                                        Background="{DynamicResource AccentBaseColorBrush}"
                                        Command="{Binding ElementName=UrlFeedItems, Path=DataContext.DeleteCommand}"
                                        CommandParameter="{Binding ElementName=BtnDelete}">
                                        <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
                                            <Rectangle
                                                Width="12"
                                                Height="15"
                                                Fill="White">
                                                <Rectangle.OpacityMask>
                                                    <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_delete}" />
                                                </Rectangle.OpacityMask>
                                            </Rectangle>
                                        </StackPanel>
                                    </Button>
                                </StackPanel>
                            </Grid>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </GroupBox>
            <!--<GroupBox Header="{DynamicResource LangKeyFeedTemplates}" Margin="10,0">
                    <TextBox Height="50" AcceptsReturn="True" TextWrapping="Wrap" Width="400"
                         Text="{Binding PublisherRssFeedModel.FeedTemplate}" FontWeight="SemiBold"/>
                </GroupBox>-->


        </StackPanel>
        <Button
            Name="BtnSave"
            Width="150"
            Height="30"
            Margin="0,10,300,10"
            HorizontalAlignment="Center"
            Background="{DynamicResource AccentBaseColorBrush}"
            Command="{Binding SaveCommand}"
            CommandParameter="{Binding ElementName=BtnSave}"
            Content="{Binding PublisherRssFeedModel.ButtonContent}"
            Foreground="White" />

    </StackPanel>
</UserControl>