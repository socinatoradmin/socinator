<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:behaviours="clr-namespace:DominatorUIUtility.Behaviours"
    xmlns:converters="clr-namespace:DominatorHouseCore.Converters;assembly=DominatorHouseCore"
    xmlns:customControl="clr-namespace:DominatorUIUtility.Views.SocioPublisher.CustomControl"
    xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
    xmlns:suggestions="clr-namespace:DominatorUIUtility.Views.SocioPublisher.Suggestions">


    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/DominatorUIUtility;component/Resources/Languages/English.xaml" />
        <ResourceDictionary Source="/DominatorUIUtility;component/Styles/BaseStyles.xaml" />
        <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.xaml" />
        <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Fonts.xaml" />
        <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Colors.xaml" />
        <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/FlatButton.xaml" />
        <ResourceDictionary Source="/DominatorUIUtility;component/Themes/PrussianBlue.xaml" />
        <ResourceDictionary Source="/DominatorUIUtility;component/Resources/Icons.xaml" />
    </ResourceDictionary.MergedDictionaries>
    <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
    <converters:ImageConverter x:Key="ImageConverter" />
    <converters:FeatureVisibilityConverter x:Key="FeatureVisibilityConverter" />
    <suggestions:SuggestionProvider x:Key="MacrosSuggestionProvider" />
    <DataTemplate x:Key="MacroTemplate">
        <Grid>
            <TextBlock Text="{Binding Path=Key}" />
        </Grid>
    </DataTemplate>

    <!--  Media Viewer  -->
    <Style TargetType="{x:Type customControl:MediaViewer}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type customControl:MediaViewer}">
                    <Border
                        x:Name="PART_Border"
                        HorizontalAlignment="{TemplateBinding HorizontalAlignment}"
                        VerticalAlignment="{TemplateBinding VerticalAlignment}"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                        <StackPanel
                            x:Name="PART_MainStackPanel"
                            HorizontalAlignment="Center"
                            Orientation="Horizontal"
                            Visibility="{TemplateBinding IsPostDataPresent,
                                                         Converter={StaticResource BooleanToVisibilityConverter}}">

                            <Button
                                x:Name="PART_NavigatePreviousImage"
                                Margin="1,0,5,0"
                                VerticalAlignment="Center"
                                Background="{DynamicResource AccentBaseColorBrush}"
                                Cursor="Hand"
                                Foreground="White"
                                IsEnabled="{TemplateBinding IsEnablePreviousPointer}">
                                <Button.Template>
                                    <ControlTemplate>
                                        <Border HorizontalAlignment="Center" VerticalAlignment="Center">
                                            <StackPanel Orientation="Horizontal">
                                                <Rectangle
                                                    Width="10"
                                                    Height="10"
                                                    Fill="{DynamicResource AccentBaseColorBrush}">
                                                    <Rectangle.OpacityMask>
                                                        <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_navigate_previous}" />
                                                    </Rectangle.OpacityMask>
                                                </Rectangle>
                                            </StackPanel>
                                        </Border>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>

                            <Border>
                                <Image
                                    x:Name="PART_Image"
                                    Width="50"
                                    Height="40"
                                    Margin="1"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Source="{TemplateBinding CurrentMediaUrl,
                                                             Converter={StaticResource ImageConverter}}">
                                    <Image.ContextMenu>
                                        <ContextMenu>
                                            <MenuItem
                                                Name="PART_MenuItemImageDelete"
                                                Header="{DynamicResource LangKeyDelete}"
                                                Visibility="{TemplateBinding DeleteMenuVisibility}">
                                                <MenuItem.Icon>
                                                    <Rectangle
                                                        Width="15"
                                                        Height="15"
                                                        Margin="0,0,0,3"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        Fill="Black">
                                                        <Rectangle.OpacityMask>
                                                            <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_delete}" />
                                                        </Rectangle.OpacityMask>
                                                    </Rectangle>
                                                </MenuItem.Icon>
                                            </MenuItem>
                                        </ContextMenu>
                                    </Image.ContextMenu>
                                </Image>
                                <Border.Effect>
                                    <DropShadowEffect Opacity="0.5" Color="Gray" />
                                </Border.Effect>
                            </Border>

                            <Button
                                x:Name="PART_NavigateNextImage"
                                Margin="5,0,2,0"
                                VerticalAlignment="Center"
                                Background="{DynamicResource AccentBaseColorBrush}"
                                Cursor="Hand"
                                Foreground="White"
                                IsEnabled="{TemplateBinding IsEnableNextPointer}">
                                <Button.Template>
                                    <ControlTemplate>
                                        <Border HorizontalAlignment="Center" VerticalAlignment="Center">
                                            <StackPanel Orientation="Horizontal">
                                                <Rectangle
                                                    Width="10"
                                                    Height="10"
                                                    Fill="{DynamicResource AccentBaseColorBrush}">
                                                    <Rectangle.OpacityMask>
                                                        <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_navigate_next}" />
                                                    </Rectangle.OpacityMask>
                                                </Rectangle>
                                            </StackPanel>
                                        </Border>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>

                            <StackPanel
                                x:Name="PART_MediaDetailsStackPanel"
                                Margin="3,0,0,0"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Orientation="Horizontal">
                                <TextBlock
                                    x:Name="PART_CurrentPointerMediaId"
                                    FontSize="12"
                                    FontWeight="Regular"
                                    Foreground="{DynamicResource AccentBaseColorBrush}"
                                    Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=CurrentMediaPointer}" />
                                <TextBlock
                                    FontSize="12"
                                    FontWeight="Regular"
                                    Foreground="{DynamicResource AccentBaseColorBrush}"
                                    Text="/" />
                                <TextBlock
                                    x:Name="PART_TotalMediacount"
                                    FontSize="12"
                                    FontWeight="Regular"
                                    Foreground="{DynamicResource AccentBaseColorBrush}"
                                    Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TotalMediaCount}" />
                            </StackPanel>

                        </StackPanel>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!--  Post Content  -->
    <Style TargetType="{x:Type customControl:PostContent}">

        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type customControl:PostContent}">
                    <Border
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                        <StackPanel>
                            <!--<StackPanel Margin="1">
                                <TextBlock  FontWeight="SemiBold"  Text="{DynamicResource LangKeyPostDescription}" VerticalAlignment="Center" FontSize="12" />
                            -->
                            <!--<TextBox x:Name="PART_PostDescription" VerticalScrollBarVisibility="Auto"
                                         mah:TextBoxHelper.Watermark="{DynamicResource LangKeyWhatsOnYourMind}"
                                         Margin="2" TextWrapping="Wrap" Height="60" Width="300"
                                         Text="{Binding Path=PostDescription, RelativeSource={RelativeSource Mode=TemplatedParent}, Mode=TwoWay}"></TextBox>-->
                            <!--

                                <customControl:SocinatorTextBox
                                    MacroTemplate="{StaticResource ResourceKey=MacroTemplate}"
                                    SuggestionProvider="{StaticResource ResourceKey=MacrosSuggestionProvider}"
                                    Watermark="{DynamicResource LangKeyWhatsOnYourMind}"
                                    Text="{TemplateBinding PostDescription}" TextHeight="60" TextWidth="300" Margin="2" TextWrapping="Wrap"
                                    DisplayMember="Key">
                                    <customControl:SocinatorTextBox.LoadingContent>
                                        <TextBlock Text="Loading Macros..." Margin="5" FontSize="14" />
                                    </customControl:SocinatorTextBox.LoadingContent>
                                </customControl:SocinatorTextBox>
                            </StackPanel>-->
                            <StackPanel Margin="1" Visibility="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=IsMediaVisibility}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock
                                        Name="TextBlockMedia"
                                        VerticalAlignment="Center"
                                        FontSize="12"
                                        FontWeight="SemiBold"
                                        Foreground="{Binding Path=Foreground, RelativeSource={RelativeSource Mode=TemplatedParent}, Mode=OneWay}"
                                        Text="{DynamicResource LangKeyMediaS}" />
                                </StackPanel>
                                <CheckBox
                                    Margin="5"
                                    Content="{DynamicResource LangKeyChangeHashOfMedia}"
                                    IsChecked="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=IsChangeHashOfMedia}">
                                    <CheckBox.Style>
                                        <Style BasedOn="{StaticResource {x:Type CheckBox}}" TargetType="CheckBox">
                                            <Setter Property="Visibility" Value="Visible" />
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding ElementName=PART_MediaViewer, Path=MediaList.Count}" Value="0">
                                                    <Setter Property="Visibility" Value="Collapsed" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </CheckBox.Style>
                                </CheckBox>

                                <StackPanel
                                    Margin="5"
                                    HorizontalAlignment="Left"
                                    VerticalAlignment="Center"
                                    Orientation="Horizontal">

                                    <customControl:MediaViewer
                                        x:Name="PART_MediaViewer"
                                        CurrentMediaUrl="{TemplateBinding customControl:MediaViewerAssist.CurrentMediaUrl}"
                                        DeleteMenuVisibility="{TemplateBinding customControl:MediaViewerAssist.DeleteMenu}"
                                        IsPostDataPresent="{TemplateBinding customControl:MediaViewerAssist.IsPostDetailsPresent}"
                                        MediaHeight="{TemplateBinding customControl:MediaViewerAssist.MediaHeight}"
                                        MediaList="{TemplateBinding customControl:MediaViewerAssist.MediaList}"
                                        MediaWidth="{TemplateBinding customControl:MediaViewerAssist.MediaWidth}" />
                                    <StackPanel Margin="5,0,0,0" Orientation="Vertical">

                                        <Button
                                            Name="PART_ImportImage"
                                            Width="100"
                                            Height="30"
                                            Margin="2"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            Background="{DynamicResource AccentBaseColorBrush}"
                                            Cursor="Hand"
                                            Foreground="White"
                                            Visibility="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=IsImportOptionsVisibility}">
                                            <StackPanel Orientation="Horizontal" ToolTip="{DynamicResource LangKeyLoadImageSOrVideoS}">
                                                <Rectangle
                                                    Width="18"
                                                    Height="15"
                                                    HorizontalAlignment="Center"
                                                    Fill="White">
                                                    <Rectangle.OpacityMask>
                                                        <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_image_export}" />
                                                    </Rectangle.OpacityMask>
                                                </Rectangle>
                                                <Label
                                                    Margin="0,-2,0,0"
                                                    VerticalContentAlignment="Center"
                                                    Content="{DynamicResource LangKeyMediaS}"
                                                    FontSize="11"
                                                    FontWeight="SemiBold"
                                                    Foreground="White" />
                                            </StackPanel>
                                        </Button>

                                        <Button
                                            Name="PART_Settings"
                                            Width="100"
                                            Height="32"
                                            Margin="1"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            Background="{DynamicResource AccentBaseColorBrush}"
                                            Cursor="Hand"
                                            Foreground="White">
                                            <StackPanel Orientation="Horizontal" ToolTip="{DynamicResource LangKeySettingToolTip}">

                                                <Rectangle
                                                    Width="15"
                                                    Height="15"
                                                    HorizontalAlignment="Center"
                                                    Fill="White">
                                                    <Rectangle.OpacityMask>
                                                        <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_settings}" />
                                                    </Rectangle.OpacityMask>
                                                </Rectangle>
                                                <Label
                                                    Margin="0,-2,0,0"
                                                    VerticalContentAlignment="Center"
                                                    Content="{DynamicResource LangKeySettings}"
                                                    FontSize="11"
                                                    FontWeight="SemiBold"
                                                    Foreground="White" />
                                            </StackPanel>
                                        </Button>

                                    </StackPanel>
                                </StackPanel>
                            </StackPanel>
                            <StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <TextBox
                                        Name="TextBoxTitle"
                                        Width="300"
                                        Height="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=PostTitleHeight}"
                                        Margin="2"
                                        HorizontalAlignment="Left"
                                        VerticalAlignment="Center"
                                        mah:TextBoxHelper.Watermark="{DynamicResource LangKeyPostTitle}"
                                        AcceptsReturn="True"
                                        Background="{Binding Path=Background, RelativeSource={RelativeSource Mode=TemplatedParent}, Mode=OneWay}"
                                        Foreground="{Binding Path=Foreground, RelativeSource={RelativeSource Mode=TemplatedParent}, Mode=OneWay}"
                                        Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=PublisherInstagramTitle}"
                                        TextWrapping="Wrap" />
                                    <StackPanel VerticalAlignment="Center">
                                        <Button
                                            Name="PART_ImportPostTitle"
                                            Width="35"
                                            Height="40"
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Center"
                                            Background="{DynamicResource AccentBaseColorBrush}"
                                            Foreground="White"
                                            Visibility="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=IsImportPostTitleOptionVisibility}">
                                            <StackPanel
                                                HorizontalAlignment="Left"
                                                Orientation="Horizontal"
                                                ToolTip="{DynamicResource LangKeyImportFromCsvTxt}">
                                                <Rectangle
                                                    Width="13"
                                                    Height="15"
                                                    HorizontalAlignment="Center"
                                                    Fill="White">
                                                    <Rectangle.OpacityMask>
                                                        <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_inbox_in}" />
                                                    </Rectangle.OpacityMask>
                                                </Rectangle>
                                            </StackPanel>
                                        </Button>
                                        <Button
                                            Name="PART_ClearPostTitle"
                                            Width="35"
                                            Height="40"
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Center"
                                            Background="{DynamicResource AccentBaseColorBrush}"
                                            Foreground="White"
                                            Visibility="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=IsClearPostTitleOptionVisibility}">
                                            <StackPanel
                                                HorizontalAlignment="Left"
                                                Orientation="Horizontal"
                                                ToolTip="Clear﻿﻿﻿﻿ All">
                                                <Rectangle
                                                    Width="13"
                                                    Height="15"
                                                    HorizontalAlignment="Center"
                                                    Fill="White">
                                                    <Rectangle.OpacityMask>
                                                        <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_clean}" />
                                                    </Rectangle.OpacityMask>
                                                </Rectangle>
                                            </StackPanel>
                                        </Button>
                                    </StackPanel>
                                </StackPanel>
                                <StackPanel Visibility="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=IsPostTitleOptionVisibility}">
                                    <RadioButton
                                        Margin="0,5"
                                        Content="{DynamicResource LangKeyRandomlyPickTitleFromList}"
                                        GroupName="title"
                                        IsChecked="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=IsRandomlyPickTitleFromList, Mode=TwoWay}" />
                                    <RadioButton
                                        Margin="0,5"
                                        Content="{DynamicResource LangKeyRemoveTitleOnceUsed}"
                                        GroupName="title"
                                        IsChecked="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=IsRemoveTitleOnceUsed, Mode=TwoWay}" />
                                </StackPanel>


                                <StackPanel Visibility="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=IsSourceUrlAndFdSellPostVisible}">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBox
                                            Width="300"
                                            Height="30"
                                            Margin="2"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            mah:TextBoxHelper.Watermark="{DynamicResource LangKeySourceUrl}"
                                            AcceptsReturn="True"
                                            Background="{Binding Path=Background, RelativeSource={RelativeSource Mode=TemplatedParent}, Mode=OneWay}"
                                            Foreground="{Binding Path=Foreground, RelativeSource={RelativeSource Mode=TemplatedParent}, Mode=OneWay}"
                                            Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=PdSourceUrl}"
                                            TextWrapping="Wrap" />
                                    </StackPanel>

                                    <StackPanel Visibility="{TemplateBinding behaviours:NetworkAvailablity.FbElementVisible}">
                                        <CheckBox
                                            Name="CheckBoxFdSellPost"
                                            Margin="2"
                                            Background="{Binding Path=Background, RelativeSource={RelativeSource Mode=TemplatedParent}, Mode=OneWay}"
                                            Content="{DynamicResource LangKeyEnableFacebookSellPost}"
                                            Foreground="{Binding Path=Foreground, RelativeSource={RelativeSource Mode=TemplatedParent}, Mode=OneWay}"
                                            IsChecked="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=IsFdSellPost}" />
                                        <StackPanel Visibility="{Binding ElementName=CheckBoxFdSellPost, Path=IsChecked, Converter={StaticResource BooleanToVisibilityConverter}}">
                                            <TextBox
                                                Name="TextBoxFdSellProductTitle"
                                                Width="300"
                                                Height="40"
                                                Margin="2"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Center"
                                                VerticalContentAlignment="Center"
                                                mah:TextBoxHelper.Watermark="{DynamicResource LangKeyWhatAreYouSelling}"
                                                AcceptsReturn="True"
                                                Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=FdSellProductTitle}"
                                                TextWrapping="Wrap" />
                                            <StackPanel Name="FdSellPostDetails" Orientation="Horizontal">
                                                <TextBox
                                                    Name="TextBoxFdSellPrice"
                                                    Width="100"
                                                    Height="30"
                                                    Margin="2"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Center"
                                                    VerticalContentAlignment="Center"
                                                    mah:TextBoxHelper.Watermark="{DynamicResource LangKeyPrice}"
                                                    Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=FdSellPrice}"
                                                    TextWrapping="Wrap" />
                                                <TextBox
                                                    Name="TextBoxFdSellLocation"
                                                    Width="196"
                                                    Height="30"
                                                    Margin="2"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Center"
                                                    VerticalContentAlignment="Center"
                                                    mah:TextBoxHelper.Watermark="{DynamicResource LangKeyLocation}"
                                                    Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=FdSellLocation}"
                                                    TextWrapping="Wrap" />
                                            </StackPanel>
                                            <StackPanel
                                                Name="FdSellPostConditionDetails"
                                                Margin="2"
                                                Orientation="Horizontal">
                                                <TextBlock
                                                    VerticalAlignment="Center"
                                                    Text="Product Condition : "
                                                    TextWrapping="Wrap" />
                                                <ComboBox
                                                    Width="190"
                                                    Margin="4"
                                                    ItemsSource="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=FdConditionItems}"
                                                    SelectedItem="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=FdCondition}" />
                                            </StackPanel>
                                        </StackPanel>
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal">
                                        <CheckBox
                                            Name="CheckBoxIsSpinTax"
                                            Margin="2"
                                            Background="{Binding Path=Background, RelativeSource={RelativeSource Mode=TemplatedParent}, Mode=OneWay}"
                                            Content="{DynamicResource LangKeyIsSpinTax}"
                                            Foreground="{Binding Path=Foreground, RelativeSource={RelativeSource Mode=TemplatedParent}, Mode=OneWay}"
                                            IsChecked="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=IsSpinTax}" />
                                    </StackPanel>
                                </StackPanel>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!--  Socinator Text Box  -->
    <Style TargetType="{x:Type customControl:SocinatorTextBox}">
        <Setter Property="Focusable" Value="False" />
        <Setter Property="Validation.ErrorTemplate" Value="{x:Null}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type customControl:SocinatorTextBox}">
                    <Border
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                        <Grid>
                            <DockPanel>
                                <Grid>
                                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                                        <TextBox
                                            x:Name="PART_Editor"
                                            Width="{TemplateBinding TextWidth}"
                                            Height="{TemplateBinding TextHeight}"
                                            HorizontalAlignment="Left"
                                            mah:TextBoxHelper.Watermark="{TemplateBinding Watermark}"
                                            AcceptsReturn="True"
                                            Background="{Binding Path=Background, RelativeSource={RelativeSource Mode=TemplatedParent}, Mode=OneWay}"
                                            Foreground="{Binding Path=Foreground, RelativeSource={RelativeSource Mode=TemplatedParent}, Mode=OneWay}"
                                            Text="{Binding Path=Text, UpdateSourceTrigger=PropertyChanged, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                            TextWrapping="{TemplateBinding TextWrapping}" />
                                    </ScrollViewer>
                                </Grid>
                            </DockPanel>
                            <Popup
                                x:Name="PART_Popup"
                                Width="{TemplateBinding TextWidth}"
                                MinHeight="25"
                                MaxHeight="400"
                                AllowsTransparency="True"
                                Focusable="False"
                                HorizontalOffset="0"
                                IsOpen="{Binding Path=IsDropDownOpen, RelativeSource={RelativeSource Mode=TemplatedParent}, Mode=TwoWay}"
                                PopupAnimation="Slide">
                                <Border
                                    Padding="2"
                                    Background="White"
                                    BorderBrush="Gray"
                                    BorderThickness="1"
                                    CornerRadius="5">
                                    <Grid>
                                        <ListBox
                                            x:Name="PART_Selector"
                                            Width="{TemplateBinding TextWidth}"
                                            BorderThickness="0"
                                            Focusable="False"
                                            Foreground="Black"
                                            ItemTemplate="{TemplateBinding MacroTemplate}"
                                            ItemTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                            ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                            ScrollViewer.VerticalScrollBarVisibility="Auto" />
                                        <Border Visibility="{Binding Path=IsLoading, RelativeSource={RelativeSource Mode=TemplatedParent}, Converter={StaticResource ResourceKey=BooleanToVisibilityConverter}}">
                                            <ContentPresenter Width="{TemplateBinding TextWidth}" ContentSource="LoadingContent" />
                                        </Border>
                                    </Grid>
                                </Border>
                            </Popup>
                        </Grid>
                    </Border>

                    <ControlTemplate.Triggers>
                        <Trigger Property="Validation.HasError" Value="True">
                            <Setter Property="BorderBrush" Value="Red" />
                        </Trigger>
                    </ControlTemplate.Triggers>

                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>


</ResourceDictionary>