<UserControl
    x:Class="DominatorUIUtility.CustomControl.AccountDetailsSelector"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="clr-namespace:DominatorHouseCore.Converters;assembly=DominatorHouseCore"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    x:Name="AccountDetailsSelectors"
    mc:Ignorable="d">
    <UserControl.Resources>
        <converters:ListViewItemIndexConverter x:Key="ListViewItemIndexConverter" />
        <converters:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
    </UserControl.Resources>
    <Border
        Margin="10"
        BorderBrush="{DynamicResource AccentBaseColorBrush}"
        BorderThickness="1">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="auto" />
            </Grid.RowDefinitions>

            <Grid Grid.Row="0" Background="{DynamicResource AccentBaseColorBrush}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width=".5*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <!--  Filter Section  -->

                <StackPanel Orientation="Horizontal">
                    <mah:ProgressRing
                        Width="30"
                        Height="30"
                        HorizontalAlignment="Left"
                        Foreground="White"
                        IsActive="{Binding IsProgressRingActive}"
                        Visibility="{Binding IsProgressRingActive, Converter={StaticResource BooleanToVisibilityConverter}}" />
                    <TextBlock
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        FontSize="13"
                        FontWeight="SemiBold"
                        Foreground="White"
                        Text="{Binding StatusText}" />
                </StackPanel>


                <StackPanel
                    Grid.Column="1"
                    Margin="4,0,0,0"
                    VerticalAlignment="Center"
                    Orientation="Horizontal"
                    Visibility="{Binding IsPageOptionVisible, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <CheckBox
                        Command="{Binding OwnPageCheckedCommand, Mode=OneWay}"
                        Content="{DynamicResource LangKeyOwnPages}"
                        FontSize="13"
                        FontWeight="SemiBold"
                        Foreground="White"
                        IsChecked="{Binding IsOwnPageSelected}" />
                    <CheckBox
                        Margin="20,0,0,0"
                        Command="{Binding LikedPageCheckedCommand, Mode=OneWay}"
                        Content="{DynamicResource LangKeyLikedPages}"
                        FontSize="13"
                        FontWeight="SemiBold"
                        Foreground="White"
                        IsChecked="{Binding IsLikedPageSelected}" />
                </StackPanel>

                <StackPanel
                    Grid.Column="1"
                    Margin="4,0,0,0"
                    VerticalAlignment="Center"
                    Orientation="Horizontal"
                    Visibility="{Binding IsGroupOptionVisible, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <CheckBox
                        Command="{Binding OwnGroupCheckedCommand, Mode=OneWay}"
                        Content="{DynamicResource LangKeyOwnGroups}"
                        FontSize="13"
                        FontWeight="SemiBold"
                        Foreground="White"
                        IsChecked="{Binding IsOwnPageSelected}" />
                    <CheckBox
                        Margin="20,0,0,0"
                        Command="{Binding JoinedGroupCheckedCommand, Mode=OneWay}"
                        Content="{DynamicResource LangKeyJoinedGroups}"
                        FontSize="13"
                        FontWeight="SemiBold"
                        Foreground="White"
                        IsChecked="{Binding IsLikedPageSelected}" />
                </StackPanel>

                <TextBox
                    Name="TextSearch"
                    Grid.Column="2"
                    Width="250"
                    Height="28"
                    Margin="5"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Center"
                    mah:TextBoxHelper.ButtonCommand="{Binding TextSearchCommand, Mode=OneWay}"
                    mah:TextBoxHelper.Watermark="{DynamicResource LangKeySearch}"
                    Background="Transparent"
                    Foreground="White"
                    Style="{StaticResource SearchMetroTextBox}"
                    Text="{Binding TextSearch, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

            </Grid>

            <!--  Account detail list  -->

            <ListView
                Grid.Row="1"
                MaxHeight="600"
                mah:ScrollViewerHelper.IsHorizontalScrollWheelEnabled="False"
                Background="Transparent"
                ItemContainerStyle="{StaticResource PublisherListViewItems}"
                ItemsSource="{Binding AccountDetailsSelectorView}"
                VirtualizingStackPanel.IsVirtualizing="True"
                VirtualizingStackPanel.VirtualizationMode="Recycling">
                <ListView.Resources>
                    <Style BasedOn="{StaticResource {x:Type GridViewColumnHeader}}" TargetType="{x:Type GridViewColumnHeader}">
                        <Setter Property="HorizontalContentAlignment" Value="Center" />
                    </Style>
                </ListView.Resources>
                <ListView.View>
                    <GridView AllowsColumnReorder="False">
                        <GridViewColumn Width="100">
                            <CheckBox
                                x:Name="AllAccount"
                                Background="Transparent"
                                Content=" #"
                                Foreground="White"
                                IsChecked="{Binding IsAllCampaignSelected}" />
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
                                        <CheckBox
                                            x:Name="SingleAccount"
                                            Margin="5,0,0,0"
                                            Background="Transparent"
                                            Foreground="White"
                                            IsChecked="{Binding IsSelected}" />
                                        <Label Content="{Binding CurrentIndex}" Foreground="White" />
                                    </StackPanel>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>

                        <GridViewColumn x:Name="SectionName" DisplayMemberBinding="{Binding DetailName}">
                            <GridViewColumn.Header>
                                <TextBlock
                                    FontSize="12"
                                    Foreground="White"
                                    Text="{Binding DetailsNameHeader}" />
                            </GridViewColumn.Header>
                        </GridViewColumn>
                        <GridViewColumn x:Name="SectionUrl" DisplayMemberBinding="{Binding DetailUrl}">
                            <TextBlock
                                FontSize="12"
                                Foreground="White"
                                Text="{Binding DetailsUrlHeader}" />
                        </GridViewColumn>
                        <GridViewColumn x:Name="SectionHeader" Header="{Binding DetailsUrlSection}">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <Border Margin="-6,-2,-6,-2">
                                        <Button
                                            x:Name="ButtonSelectSection"
                                            Margin="6,2,6,2"
                                            Background="Transparent"
                                            Command="{Binding Path=DataContext.SelectSectionCommand, RelativeSource={RelativeSource AncestorType=ListView}}"
                                            CommandParameter="{Binding}"
                                            Content="{Binding DetailSection, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                            Cursor="Hand"
                                            FontWeight="SemiBold">
                                            <Button.Style>
                                                <Style BasedOn="{StaticResource {x:Type Button}}" TargetType="{x:Type Button}">
                                                    <Setter Property="IsEnabled" Value="false" />
                                                    <Setter Property="Foreground" Value="{DynamicResource AccentBaseColorBrush}" />
                                                    <Style.Triggers>
                                                        <MultiDataTrigger>
                                                            <MultiDataTrigger.Conditions>
                                                                <Condition Binding="{Binding IsSelected}" Value="true" />
                                                                <Condition Binding="{Binding IsSectionAvailable}" Value="true" />
                                                            </MultiDataTrigger.Conditions>
                                                            <Setter Property="IsEnabled" Value="True" />
                                                        </MultiDataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Button.Style>
                                        </Button>
                                    </Border>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                    </GridView>
                </ListView.View>
            </ListView>

            <StackPanel
                Grid.Row="2"
                Margin="0,10,10,10"
                HorizontalAlignment="Right"
                Orientation="Horizontal">
                <Button
                    Name="btnSave"
                    Height="30"
                    Margin="0,0,10,0"
                    HorizontalAlignment="Center"
                    x:FieldModifier="public"
                    Background="{DynamicResource AccentBaseColorBrush}"
                    Content="{DynamicResource LangKeySave}"
                    Foreground="White" />
                <Button
                    Name="btnCancel"
                    Height="30"
                    Margin="0,0,10,0"
                    HorizontalAlignment="Center"
                    x:FieldModifier="public"
                    Background="{DynamicResource AccentBaseColorBrush}"
                    Content="{DynamicResource LangKeyCancel}"
                    Foreground="White" />
            </StackPanel>

        </Grid>
    </Border>
</UserControl>