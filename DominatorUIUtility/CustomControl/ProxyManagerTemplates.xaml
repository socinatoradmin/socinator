<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:behaviours="clr-namespace:DominatorUIUtility.Behaviours"
    xmlns:converters="clr-namespace:DominatorHouseCore.Converters;assembly=DominatorHouseCore"
    xmlns:enums="clr-namespace:DominatorHouseCore.Enums;assembly=DominatorHouseCore"
    xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
    xmlns:utility="clr-namespace:DominatorHouseCore.Utility;assembly=DominatorHouseCore">
    <ControlTemplate x:Key="ProxyManagerControlTemplate">
        <ControlTemplate.Resources>
            <converters:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
            <converters:IndexToRowNoConverter x:Key="IndexToRowNoConverter" />
            <ControlTemplate x:Key="ErrorTemplate">
                <StackPanel Orientation="Vertical">
                    <AdornedElementPlaceholder x:Name="ErrorHolder">
                        <Border BorderBrush="red" BorderThickness="1">
                            <Border.Style>
                                <Style TargetType="{x:Type Border}">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Text, ElementName=error}" Value="Invalid IP address">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                        </Border>
                    </AdornedElementPlaceholder>
                    <TextBlock
                        Name="error"
                        VerticalAlignment="Center"
                        FontWeight="SemiBold"
                        Foreground="Red"
                        Text="{Binding ElementName=ErrorHolder, Path=AdornedElement.(Validation.Errors)[0].ErrorContent}">
                        <TextBlock.Style>
                            <Style TargetType="{x:Type TextBlock}">
                                <Setter Property="Visibility" Value="Collapsed" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Text, ElementName=error}" Value="Invalid IP address">
                                        <Setter Property="Visibility" Value="Visible" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>

                    </TextBlock>
                </StackPanel>
            </ControlTemplate>
        </ControlTemplate.Resources>

        <Grid>

            <Grid.RowDefinitions>
                <RowDefinition Height="150" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <StackPanel Grid.Row="0">
                <StackPanel Background="{DynamicResource AccentBaseColorBrush}" Orientation="Horizontal">

                    <Button
                        x:Name="btnImportProxies"
                        Height="30"
                        Margin="10,5"
                        Background="{DynamicResource AccentBaseColorBrush}"
                        Command="{Binding ImportProxyCommand}"
                        Foreground="White"
                        ToolTip="{DynamicResource LangKeyImportProxyDescription}">
                        <Button.Content>
                            <VirtualizingStackPanel Orientation="Horizontal">
                                <Rectangle
                                    Width="16"
                                    Height="15"
                                    VerticalAlignment="Center"
                                    Fill="White">
                                    <Rectangle.OpacityMask>
                                        <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_inbox_in}" />
                                    </Rectangle.OpacityMask>
                                </Rectangle>
                                <TextBlock Margin="5,0" Text="{DynamicResource LangKeyImportProxies}" />
                            </VirtualizingStackPanel>
                        </Button.Content>
                    </Button>

                    <Button
                        x:Name="btnExportProxies"
                        Height="30"
                        Margin="10,5"
                        Background="{DynamicResource AccentBaseColorBrush}"
                        Command="{Binding ExportProxyCommand}"
                        Foreground="White">
                        <Button.Content>
                            <VirtualizingStackPanel Orientation="Horizontal">
                                <Rectangle
                                    Width="16"
                                    Height="15"
                                    VerticalAlignment="Center"
                                    Fill="White">
                                    <Rectangle.OpacityMask>
                                        <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_inbox_out}" />
                                    </Rectangle.OpacityMask>
                                </Rectangle>
                                <TextBlock Margin="5,0" Text="{DynamicResource LangKeyExportProxies}" />
                            </VirtualizingStackPanel>
                        </Button.Content>
                    </Button>

                    <Button
                        x:Name="btnAddProxy"
                        Height="30"
                        Margin="10,5"
                        Background="{DynamicResource AccentBaseColorBrush}"
                        Command="{Binding AddProxyCommand}"
                        Foreground="White"
                        IsEnabled="{Binding IsAddProxyEnabled}">
                        <Button.Content>
                            <VirtualizingStackPanel Orientation="Horizontal">
                                <Rectangle
                                    Width="16"
                                    Height="15"
                                    VerticalAlignment="Center"
                                    Fill="White">
                                    <Rectangle.OpacityMask>
                                        <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_add}" />
                                    </Rectangle.OpacityMask>
                                </Rectangle>
                                <TextBlock Margin="5,0" Text="{DynamicResource LangKeyAddProxy}" />
                            </VirtualizingStackPanel>
                        </Button.Content>
                    </Button>

                </StackPanel>

                <StackPanel Margin="5" Orientation="Horizontal">

                    <CheckBox
                        Name="ChkHideUnhideSocialProfiles"
                        Margin="5"
                        Command="{Binding HideUnhideSocialProfilesCommand}"
                        Content="{DynamicResource LangKeyHideAssignedSocialProfiles}">
                        <CheckBox.CommandParameter>
                            <MultiBinding Converter="{StaticResource ListConvertor}" UpdateSourceTrigger="PropertyChanged">
                                <Binding ElementName="ProxyDataGrid" />
                                <Binding ElementName="ChkHideUnhideSocialProfiles" Path="IsChecked" />
                            </MultiBinding>
                        </CheckBox.CommandParameter>
                    </CheckBox>
                    <CheckBox
                        x:Name="ChkHideUnhideUserPassword"
                        Margin="5"
                        Command="{Binding HideUnhideUserPasswordCommand}"
                        Content="{DynamicResource LangKeyHideUsernameAndPassword}">
                        <CheckBox.CommandParameter>
                            <MultiBinding Converter="{StaticResource ListConvertor}" UpdateSourceTrigger="PropertyChanged">
                                <Binding ElementName="ProxyDataGrid" />
                                <Binding ElementName="ChkHideUnhideUserPassword" Path="IsChecked" />
                            </MultiBinding>
                        </CheckBox.CommandParameter>
                    </CheckBox>
                    <CheckBox
                        x:Name="ShowByGroup"
                        Margin="5"
                        Command="{Binding ShowByGroupCommand}"
                        CommandParameter="{Binding IsChecked, ElementName=ShowByGroup}"
                        Content="{DynamicResource LangKeyShowByGroup}" />
                    <CheckBox
                        x:Name="FilterByGroup"
                        Margin="5"
                        Content="{DynamicResource LangKeyFilterByGroup}" />
                    <CheckBox
                        Name="ShowProxiesWithError"
                        Margin="5"
                        Command="{Binding ShowProxiesWithErrorCommand}"
                        CommandParameter="{Binding IsChecked, ElementName=ShowProxiesWithError}"
                        Content="{DynamicResource LangKeyShowOnlyProxiesWithError}" />
                    <CheckBox
                        x:Name="ChkShowUnassignedProxies"
                        Margin="5"
                        Command="{Binding ShowUnassignedProxiesCommand}"
                        CommandParameter="{Binding IsChecked, ElementName=ChkShowUnassignedProxies}"
                        Content="{DynamicResource LangKeyShowOnlyUnassignedProxies}" />

                </StackPanel>

                <StackPanel Margin="5" Orientation="Horizontal">
                    <TextBlock
                        Margin="5"
                        VerticalAlignment="Center"
                        Text="{DynamicResource LangKeyFilter}" />
                    <TextBox
                        Name="txtfilter"
                        Width="200"
                        Height="25"
                        Text="{Binding Filter, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    <TextBlock
                        Margin="20,5"
                        VerticalAlignment="Center"
                        Text="{DynamicResource LangKeyURLToUseToVerifyTheProxies}" />
                    <TextBox
                        Name="txtURLToUseToVerifyProxies"
                        Width="200"
                        Height="25">
                        <TextBox.Text>
                            <Binding Path="URLToUseToVerifyProxies" UpdateSourceTrigger="PropertyChanged">
                                <Binding.ValidationRules>
                                    <utility:UrlValidator ValidatesOnTargetUpdated="True" />
                                </Binding.ValidationRules>
                            </Binding>
                        </TextBox.Text>
                    </TextBox>
                    <CheckBox Margin="5" Content="{DynamicResource LangKeyAssignRandomProxyToUnassignedAccounts}">
                        <CheckBox.Style>
                            <Style BasedOn="{StaticResource {x:Type CheckBox}}" TargetType="CheckBox">
                                <Style.Triggers>
                                    <Trigger Property="IsChecked" Value="True">
                                        <Setter Property="Command" Value="{Binding AssignRandomProxyCommand}" />
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </CheckBox.Style>
                    </CheckBox>
                    <StackPanel
                        x:Name="cmbFilterBytag"
                        Margin="5,0"
                        Orientation="Horizontal"
                        Visibility="{Binding ElementName=FilterByGroup, Path=IsChecked, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <TextBlock
                            Margin="5,5"
                            VerticalAlignment="Center"
                            Text="{DynamicResource LangKeySelectTag}" />
                        <ComboBox
                            Name="Group"
                            Width="150"
                            behaviours:SelectionChangedBehaviour.Command="{Binding GroupsChangedCommand}"
                            mah:TextBoxHelper.ClearTextButton="True"
                            ItemsSource="{Binding ProxyManagerModel.Groups}" />
                    </StackPanel>
                </StackPanel>

                <StackPanel Background="{DynamicResource AccentBaseColorBrush}" Orientation="Horizontal">

                    <Button
                        x:Name="btnDeleteSelected"
                        Height="30"
                        Margin="10,5"
                        Background="{DynamicResource AccentBaseColorBrush}"
                        Command="{Binding DeleteCommand}"
                        Foreground="White">
                        <Button.Content>
                            <StackPanel Orientation="Horizontal">
                                <Rectangle
                                    Width="15"
                                    Height="18"
                                    Fill="White">
                                    <Rectangle.OpacityMask>
                                        <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_delete}" />
                                    </Rectangle.OpacityMask>
                                </Rectangle>
                                <TextBlock Margin="5,0" Text="{DynamicResource LangKeySelectedOnly}" />
                            </StackPanel>
                        </Button.Content>
                    </Button>

                    <Button
                        x:Name="btnExportSelected"
                        Height="30"
                        Margin="10,5"
                        Background="{DynamicResource AccentBaseColorBrush}"
                        Command="{Binding ExportProxyCommand}"
                        CommandParameter="Selected"
                        Foreground="White">
                        <Button.Content>
                            <StackPanel Orientation="Horizontal">
                                <Rectangle
                                    Width="16"
                                    Height="15"
                                    VerticalAlignment="Center"
                                    Fill="White">
                                    <Rectangle.OpacityMask>
                                        <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_inbox_out}" />
                                    </Rectangle.OpacityMask>
                                </Rectangle>
                                <TextBlock Margin="5,0" Text="{DynamicResource LangKeyExportSelected}" />
                            </StackPanel>
                        </Button.Content>
                    </Button>
                    <Button
                        x:Name="btnVarifySelected"
                        Height="30"
                        Margin="10,5"
                        Background="{DynamicResource AccentBaseColorBrush}"
                        Command="{Binding VerifyProxyCommand}"
                        CommandParameter="Selected"
                        Foreground="White">
                        <Button.Content>
                            <StackPanel Orientation="Horizontal">
                                <Rectangle
                                    Width="16"
                                    Height="15"
                                    VerticalAlignment="Center"
                                    Fill="White">
                                    <Rectangle.OpacityMask>
                                        <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_social_pocket}" />
                                    </Rectangle.OpacityMask>
                                </Rectangle>
                                <TextBlock Margin="5,0" Text="{DynamicResource LangKeyVerifySelected}" />
                            </StackPanel>
                        </Button.Content>
                    </Button>
                </StackPanel>

            </StackPanel>

            <DataGrid
                x:Name="ProxyDataGrid"
                Grid.Row="1"
                AlternationCount="{Binding Items.Count, RelativeSource={RelativeSource Self}}"
                AutoGenerateColumns="False"
                CanUserAddRows="False"
                EnableRowVirtualization="False"
                Foreground="White"
                GridLinesVisibility="All"
                ItemsSource="{Binding LstProxyManagerModel, IsAsync=True}"
                ScrollViewer.HorizontalScrollBarVisibility="Auto"
                ScrollViewer.IsDeferredScrollingEnabled="True"
                ScrollViewer.VerticalScrollBarVisibility="Auto"
                VirtualizingPanel.IsVirtualizingWhenGrouping="True"
                VirtualizingStackPanel.IsVirtualizing="True"
                VirtualizingStackPanel.VirtualizationMode="Recycling">
                <DataGrid.Resources>

                    <DataTemplate x:Key="AccountsAssignedToTemplate">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="2*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <VirtualizingStackPanel Orientation="Horizontal">
                                <ContentControl Margin="10,0" VerticalAlignment="Center">
                                    <ContentControl.Style>
                                        <Style TargetType="{x:Type ContentControl}">
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding Path=AccountNetwork}" Value="{x:Static enums:SocialNetworks.Facebook}">
                                                    <Setter Property="Content">
                                                        <Setter.Value>
                                                            <Rectangle
                                                                Width="20"
                                                                Height="20"
                                                                Fill="#003569">
                                                                <Rectangle.Resources>
                                                                    <SolidColorBrush x:Key="BlackBrush" Color="Black" />
                                                                </Rectangle.Resources>
                                                                <Rectangle.OpacityMask>
                                                                    <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_social_facebook_variant}" />
                                                                </Rectangle.OpacityMask>
                                                            </Rectangle>
                                                        </Setter.Value>
                                                    </Setter>
                                                </DataTrigger>

                                                <DataTrigger Binding="{Binding Path=AccountNetwork}" Value="{x:Static enums:SocialNetworks.Instagram}">
                                                    <Setter Property="Content">
                                                        <Setter.Value>
                                                            <Rectangle
                                                                Width="20"
                                                                Height="20"
                                                                Fill="Red">
                                                                <Rectangle.Resources>
                                                                    <SolidColorBrush x:Key="BlackBrush" Color="Black" />
                                                                </Rectangle.Resources>
                                                                <Rectangle.OpacityMask>
                                                                    <VisualBrush Stretch="Fill" Visual="{StaticResource Instagram}" />
                                                                </Rectangle.OpacityMask>
                                                            </Rectangle>
                                                        </Setter.Value>
                                                    </Setter>
                                                </DataTrigger>

                                                <DataTrigger Binding="{Binding Path=AccountNetwork}" Value="{x:Static enums:SocialNetworks.Twitter}">
                                                    <Setter Property="Content">
                                                        <Setter.Value>
                                                            <Rectangle
                                                                Width="20"
                                                                Height="20"
                                                                Fill="#3897F0">
                                                                <Rectangle.Resources>
                                                                    <SolidColorBrush x:Key="BlackBrush" Color="Black" />
                                                                </Rectangle.Resources>
                                                                <Rectangle.OpacityMask>
                                                                    <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_twitter_bird}" />
                                                                </Rectangle.OpacityMask>
                                                            </Rectangle>
                                                        </Setter.Value>
                                                    </Setter>
                                                </DataTrigger>

                                                <DataTrigger Binding="{Binding Path=AccountNetwork}" Value="{x:Static enums:SocialNetworks.Pinterest}">
                                                    <Setter Property="Content">
                                                        <Setter.Value>
                                                            <Rectangle
                                                                Width="20"
                                                                Height="20"
                                                                Fill="Red">
                                                                <Rectangle.Resources>
                                                                    <SolidColorBrush x:Key="BlackBrush" Color="Black" />
                                                                </Rectangle.Resources>
                                                                <Rectangle.OpacityMask>
                                                                    <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_social_pinterest}" />
                                                                </Rectangle.OpacityMask>
                                                            </Rectangle>
                                                        </Setter.Value>
                                                    </Setter>
                                                </DataTrigger>

                                                <DataTrigger Binding="{Binding Path=AccountNetwork}" Value="{x:Static enums:SocialNetworks.Quora}">
                                                    <Setter Property="Content">
                                                        <Setter.Value>
                                                            <Rectangle
                                                                Width="20"
                                                                Height="20"
                                                                Fill="Red">
                                                                <Rectangle.Resources>
                                                                    <SolidColorBrush x:Key="BlackBrush" Color="Black" />
                                                                </Rectangle.Resources>
                                                                <Rectangle.OpacityMask>
                                                                    <VisualBrush Stretch="Fill" Visual="{StaticResource Quora}" />
                                                                </Rectangle.OpacityMask>
                                                            </Rectangle>
                                                        </Setter.Value>
                                                    </Setter>
                                                </DataTrigger>

                                                <DataTrigger Binding="{Binding Path=AccountNetwork}" Value="{x:Static enums:SocialNetworks.Reddit}">
                                                    <Setter Property="Content">
                                                        <Setter.Value>
                                                            <Rectangle
                                                                Width="20"
                                                                Height="20"
                                                                Fill="OrangeRed">
                                                                <Rectangle.Resources>
                                                                    <SolidColorBrush x:Key="BlackBrush" Color="Black" />
                                                                </Rectangle.Resources>
                                                                <Rectangle.OpacityMask>
                                                                    <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_social_reddit}" />
                                                                </Rectangle.OpacityMask>
                                                            </Rectangle>
                                                        </Setter.Value>
                                                    </Setter>
                                                </DataTrigger>

                                                <DataTrigger Binding="{Binding Path=AccountNetwork}" Value="{x:Static enums:SocialNetworks.LinkedIn}">
                                                    <Setter Property="Content">
                                                        <Setter.Value>
                                                            <Rectangle
                                                                Width="20"
                                                                Height="20"
                                                                Fill="DodgerBlue">
                                                                <Rectangle.Resources>
                                                                    <SolidColorBrush x:Key="BlackBrush" Color="Black" />
                                                                </Rectangle.Resources>
                                                                <Rectangle.OpacityMask>
                                                                    <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_social_linkedin_variant}" />
                                                                </Rectangle.OpacityMask>
                                                            </Rectangle>
                                                        </Setter.Value>
                                                    </Setter>
                                                </DataTrigger>

                                                <DataTrigger Binding="{Binding Path=AccountNetwork}" Value="{x:Static enums:SocialNetworks.Tumblr}">
                                                    <Setter Property="Content">
                                                        <Setter.Value>
                                                            <Rectangle
                                                                Width="16"
                                                                Height="20"
                                                                Fill="DimGray">
                                                                <Rectangle.Resources>
                                                                    <SolidColorBrush x:Key="BlackBrush" Color="Black" />
                                                                </Rectangle.Resources>
                                                                <Rectangle.OpacityMask>
                                                                    <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_social_tumblr}" />
                                                                </Rectangle.OpacityMask>
                                                            </Rectangle>
                                                        </Setter.Value>
                                                    </Setter>
                                                </DataTrigger>
                                                <!--<DataTrigger Binding="{Binding Path=AccountNetwork}" Value="{x:Static enums:SocialNetworks.Gplus}">
                                                    <Setter Property="Content" >
                                                        <Setter.Value>
                                                            <Rectangle Fill="#FF0000" Width="20" Height="20">
                                                                <Rectangle.OpacityMask>
                                                                    <VisualBrush Visual="{StaticResource appbar_googleplus}" Stretch="Fill" />
                                                                </Rectangle.OpacityMask>
                                                            </Rectangle>
                                                        </Setter.Value>
                                                    </Setter>
                                                </DataTrigger>-->
                                                <DataTrigger Binding="{Binding Path=AccountNetwork}" Value="{x:Static enums:SocialNetworks.YouTube}">
                                                    <Setter Property="Content">
                                                        <Setter.Value>
                                                            <Rectangle
                                                                Width="20"
                                                                Height="20"
                                                                Fill="#FF0000">
                                                                <Rectangle.OpacityMask>
                                                                    <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_youtube}" />
                                                                </Rectangle.OpacityMask>
                                                            </Rectangle>
                                                        </Setter.Value>
                                                    </Setter>
                                                </DataTrigger>


                                            </Style.Triggers>
                                        </Style>
                                    </ContentControl.Style>
                                </ContentControl>
                                <TextBlock
                                    x:Name="txtblkaccount"
                                    VerticalAlignment="Center"
                                    Text="{Binding UserName}" />
                            </VirtualizingStackPanel>
                            <Button
                                x:Name="btnRemoveAccountFromProxy"
                                Grid.Column="1"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Center"
                                Background="Transparent"
                                Command="{Binding Source={x:Reference MainGrid}, Path=DataContext.RemoveAccountFromProxyCommand}"
                                CommandParameter="{Binding}"
                                Content="{DynamicResource LangKeyRemove}"
                                FontWeight="SemiBold"
                                Foreground="{Binding ElementName=txtblkaccount, Path=Foreground}" />
                        </Grid>
                    </DataTemplate>

                    <DataTemplate x:Key="AccountsToBeAssignTemplate">
                        <VirtualizingStackPanel Orientation="Horizontal">
                            <CheckBox
                                x:Name="Account"
                                Command="{Binding DataContext.AccountToAddToProxyCommand, Source={x:Reference MainGrid}}"
                                CommandParameter="{Binding}" />
                            <ContentControl Margin="10,0" VerticalAlignment="Center">
                                <ContentControl.Style>
                                    <Style TargetType="{x:Type ContentControl}">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Path=AccountNetwork}" Value="{x:Static enums:SocialNetworks.Facebook}">
                                                <Setter Property="Content">
                                                    <Setter.Value>
                                                        <Rectangle
                                                            Width="20"
                                                            Height="20"
                                                            Fill="#003569">
                                                            <Rectangle.Resources>
                                                                <SolidColorBrush x:Key="BlackBrush" Color="Black" />
                                                            </Rectangle.Resources>
                                                            <Rectangle.OpacityMask>
                                                                <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_social_facebook_variant}" />
                                                            </Rectangle.OpacityMask>
                                                        </Rectangle>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>

                                            <DataTrigger Binding="{Binding Path=AccountNetwork}" Value="{x:Static enums:SocialNetworks.Instagram}">
                                                <Setter Property="Content">
                                                    <Setter.Value>
                                                        <Rectangle
                                                            Width="20"
                                                            Height="20"
                                                            Fill="Red">
                                                            <Rectangle.Resources>
                                                                <SolidColorBrush x:Key="BlackBrush" Color="Black" />
                                                            </Rectangle.Resources>
                                                            <Rectangle.OpacityMask>
                                                                <VisualBrush Stretch="Fill" Visual="{StaticResource Instagram}" />
                                                            </Rectangle.OpacityMask>
                                                        </Rectangle>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>

                                            <DataTrigger Binding="{Binding Path=AccountNetwork}" Value="{x:Static enums:SocialNetworks.Twitter}">
                                                <Setter Property="Content">
                                                    <Setter.Value>
                                                        <Rectangle
                                                            Width="20"
                                                            Height="20"
                                                            Fill="#3897F0">
                                                            <Rectangle.Resources>
                                                                <SolidColorBrush x:Key="BlackBrush" Color="Black" />
                                                            </Rectangle.Resources>
                                                            <Rectangle.OpacityMask>
                                                                <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_twitter_bird}" />
                                                            </Rectangle.OpacityMask>
                                                        </Rectangle>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>

                                            <DataTrigger Binding="{Binding Path=AccountNetwork}" Value="{x:Static enums:SocialNetworks.Pinterest}">
                                                <Setter Property="Content">
                                                    <Setter.Value>
                                                        <Rectangle
                                                            Width="20"
                                                            Height="20"
                                                            Fill="Red">
                                                            <Rectangle.Resources>
                                                                <SolidColorBrush x:Key="BlackBrush" Color="Black" />
                                                            </Rectangle.Resources>
                                                            <Rectangle.OpacityMask>
                                                                <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_social_pinterest}" />
                                                            </Rectangle.OpacityMask>
                                                        </Rectangle>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>

                                            <DataTrigger Binding="{Binding Path=AccountNetwork}" Value="{x:Static enums:SocialNetworks.Quora}">
                                                <Setter Property="Content">
                                                    <Setter.Value>
                                                        <Rectangle
                                                            Width="20"
                                                            Height="20"
                                                            Fill="Red">
                                                            <Rectangle.Resources>
                                                                <SolidColorBrush x:Key="BlackBrush" Color="Black" />
                                                            </Rectangle.Resources>
                                                            <Rectangle.OpacityMask>
                                                                <VisualBrush Stretch="Fill" Visual="{StaticResource Quora}" />
                                                            </Rectangle.OpacityMask>
                                                        </Rectangle>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>

                                            <DataTrigger Binding="{Binding Path=AccountNetwork}" Value="{x:Static enums:SocialNetworks.Reddit}">
                                                <Setter Property="Content">
                                                    <Setter.Value>
                                                        <Rectangle
                                                            Width="20"
                                                            Height="20"
                                                            Fill="OrangeRed">
                                                            <Rectangle.Resources>
                                                                <SolidColorBrush x:Key="BlackBrush" Color="Black" />
                                                            </Rectangle.Resources>
                                                            <Rectangle.OpacityMask>
                                                                <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_social_reddit}" />
                                                            </Rectangle.OpacityMask>
                                                        </Rectangle>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>

                                            <DataTrigger Binding="{Binding Path=AccountNetwork}" Value="{x:Static enums:SocialNetworks.LinkedIn}">
                                                <Setter Property="Content">
                                                    <Setter.Value>
                                                        <Rectangle
                                                            Width="20"
                                                            Height="20"
                                                            Fill="DodgerBlue">
                                                            <Rectangle.Resources>
                                                                <SolidColorBrush x:Key="BlackBrush" Color="Black" />
                                                            </Rectangle.Resources>
                                                            <Rectangle.OpacityMask>
                                                                <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_social_linkedin_variant}" />
                                                            </Rectangle.OpacityMask>
                                                        </Rectangle>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>

                                            <DataTrigger Binding="{Binding Path=AccountNetwork}" Value="{x:Static enums:SocialNetworks.Tumblr}">
                                                <Setter Property="Content">
                                                    <Setter.Value>
                                                        <Rectangle
                                                            Width="16"
                                                            Height="20"
                                                            Fill="DimGray">
                                                            <Rectangle.Resources>
                                                                <SolidColorBrush x:Key="BlackBrush" Color="Black" />
                                                            </Rectangle.Resources>
                                                            <Rectangle.OpacityMask>
                                                                <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_social_tumblr}" />
                                                            </Rectangle.OpacityMask>
                                                        </Rectangle>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>
                                            <!--<DataTrigger Binding="{Binding Path=AccountNetwork}" Value="{x:Static enums:SocialNetworks.Gplus}">
                                                <Setter Property="Content" >
                                                    <Setter.Value>
                                                        <Rectangle Fill="#FF0000" Width="20" Height="20">
                                                            <Rectangle.OpacityMask>
                                                                <VisualBrush Visual="{StaticResource appbar_googleplus}" Stretch="Fill" />
                                                            </Rectangle.OpacityMask>
                                                        </Rectangle>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>-->
                                            <DataTrigger Binding="{Binding Path=AccountNetwork}" Value="{x:Static enums:SocialNetworks.YouTube}">
                                                <Setter Property="Content">
                                                    <Setter.Value>
                                                        <Rectangle
                                                            Width="20"
                                                            Height="20"
                                                            Fill="#FF0000">
                                                            <Rectangle.OpacityMask>
                                                                <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_youtube}" />
                                                            </Rectangle.OpacityMask>
                                                        </Rectangle>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>

                                        </Style.Triggers>
                                    </Style>
                                </ContentControl.Style>
                            </ContentControl>
                            <TextBlock
                                x:Name="txtblkaccount"
                                VerticalAlignment="Center"
                                Text="{Binding UserName}" />
                        </VirtualizingStackPanel>
                    </DataTemplate>
                    <Style TargetType="{x:Type DataGridCell}">
                        <Setter Property="Foreground" Value="{DynamicResource MetroDataGrid.InactiveSelectionHighlightBrush}" />
                        <Style.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}" />
                                <Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}" />
                            </Trigger>
                            <Trigger Property="IsReadOnly" Value="True">
                                <Setter Property="VerticalContentAlignment" Value="Center" />

                            </Trigger>

                        </Style.Triggers>
                    </Style>


                </DataGrid.Resources>
                <DataGrid.GroupStyle>
                    <GroupStyle>
                        <GroupStyle.ContainerStyle>
                            <Style TargetType="{x:Type GroupItem}">
                                <Setter Property="Margin" Value="0,0,0,5" />
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="{x:Type GroupItem}">
                                            <Expander Margin="5" Header="{Binding Path=Name}">
                                                <Expander.Content>
                                                    <ItemsPresenter />
                                                </Expander.Content>
                                            </Expander>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </GroupStyle.ContainerStyle>
                    </GroupStyle>
                </DataGrid.GroupStyle>

                <DataGrid.Columns>
                    <DataGridTemplateColumn>
                        <DataGridTemplateColumn.Header>
                            <CheckBox
                                Name="AllProxyChecked"
                                Content=" #"
                                IsChecked="{Binding DataContext.IsAllProxySelected, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}" />
                        </DataGridTemplateColumn.Header>

                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <CheckBox
                                    Margin="5,0,0,0"
                                    Command="{Binding DataContext.SelectProxyCommand, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
                                    Content="{Binding AlternationIndex, RelativeSource={RelativeSource AncestorType=DataGridRow}, Converter={StaticResource IndexToRowNoConverter}}"
                                    IsChecked="{Binding IsProxySelected, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Header="{DynamicResource LangKeyName}">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBox Text="{Binding AccountProxy.ProxyName, UpdateSourceTrigger=PropertyChanged}" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                    <DataGridTemplateColumn Header="{DynamicResource LangKeyProxyIpPort}">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBox
                                    SelectionLength="0"
                                    SelectionStart="0"
                                    Validation.ErrorTemplate="{StaticResource ErrorTemplate}">
                                    <TextBox.Text>
                                        <MultiBinding Converter="{StaticResource ProxyPortToIpAddressConvertor}" UpdateSourceTrigger="PropertyChanged">
                                            <MultiBinding.ValidationRules>
                                                <utility:IPAddressValidation ValidationStep="CommittedValue" />
                                            </MultiBinding.ValidationRules>
                                            <Binding Path="AccountProxy.ProxyIp" UpdateSourceTrigger="PropertyChanged" />
                                            <Binding Path="AccountProxy.ProxyPort" UpdateSourceTrigger="PropertyChanged" />
                                        </MultiBinding>
                                    </TextBox.Text>
                                </TextBox>

                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Header="{DynamicResource LangKeyProxyUsername}">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBox Text="{Binding AccountProxy.ProxyUsername, UpdateSourceTrigger=PropertyChanged}" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Header="{DynamicResource LangKeyProxyPassword}">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBox Text="{Binding AccountProxy.ProxyPassword, UpdateSourceTrigger=PropertyChanged}" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Header="{DynamicResource LangKeySocialProfiles}">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <VirtualizingStackPanel Orientation="Horizontal">
                                    <mah:DropDownButton
                                        x:Name="dropdown"
                                        Width="40"
                                        Height="20"
                                        Command="{Binding DataContext.DropDownCommand, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
                                        CommandParameter="{Binding}"
                                        Content="{Binding Path=AccountsAssignedto.Count}"
                                        ItemTemplate="{StaticResource AccountsAssignedToTemplate}"
                                        ItemsSource="{Binding AccountsAssignedto}">
                                        <mah:DropDownButton.Style>
                                            <Style TargetType="{x:Type mah:DropDownButton}">
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Path=AccountsAssignedto.Count}" Value="0">
                                                        <Setter Property="IsEnabled" Value="False" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </mah:DropDownButton.Style>

                                    </mah:DropDownButton>

                                    <mah:DropDownButton
                                        x:Name="AddDropdown"
                                        Width="40"
                                        Height="20"
                                        Margin="10,0"
                                        Command="{Binding DataContext.DropDownCommand, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
                                        CommandParameter="{Binding}"
                                        Content="{DynamicResource LangKeyAdd}"
                                        IsEnabled="True"
                                        ItemTemplate="{StaticResource AccountsToBeAssignTemplate}"
                                        ItemsSource="{Binding AccountsToBeAssign}">
                                        <!--<Controls:DropDownButton.Style>
                                            <Style TargetType="{x:Type Controls:DropDownButton}">
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Path=AccountsToBeAssign.Count}" Value="0">
                                                        <Setter Property="IsEnabled" Value="False" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Controls:DropDownButton.Style>-->
                                    </mah:DropDownButton>

                                </VirtualizingStackPanel>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTextColumn
                        Binding="{Binding Status}"
                        Header="{DynamicResource LangKeyStatus}"
                        IsReadOnly="True" />
                    <DataGridTextColumn
                        Binding="{Binding ResponseTime}"
                        Header="{DynamicResource LangKeyResponseTime}"
                        IsReadOnly="True" />
                    <DataGridTextColumn
                        Binding="{Binding Failures}"
                        Header="{DynamicResource LangKeyFailures}"
                        IsReadOnly="True" />
                    <DataGridTemplateColumn Header="{DynamicResource LangKeyAction}">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <VirtualizingStackPanel Orientation="Horizontal">
                                    <Button
                                        x:Name="btnUpdateProxy"
                                        Background="Transparent"
                                        Command="{Binding DataContext.UpdateProxyCommand, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
                                        CommandParameter="{Binding ElementName=btnUpdateProxy}"
                                        Content="{DynamicResource LangKeyUpdateProxy}"
                                        FontWeight="SemiBold"
                                        Foreground="{DynamicResource AccentBaseColorBrush}" />
                                    <Button
                                        x:Name="btnDeletesProxy"
                                        Background="Transparent"
                                        Command="{Binding DataContext.DeleteCommand, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
                                        CommandParameter="{Binding ElementName=btnDeletesProxy}"
                                        Content="{DynamicResource LangKeyDelete}"
                                        FontWeight="SemiBold"
                                        Foreground="{DynamicResource AccentBaseColorBrush}" />
                                    <Button
                                        x:Name="btnVerifyProxy"
                                        Background="Transparent"
                                        Command="{Binding DataContext.VerifyProxyCommand, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
                                        CommandParameter="{Binding ElementName=btnVerifyProxy}"
                                        Content="{DynamicResource LangKeyVerifyProxy}"
                                        FontWeight="SemiBold"
                                        Foreground="{DynamicResource AccentBaseColorBrush}" />

                                </VirtualizingStackPanel>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTextColumn
                        Binding="{Binding AccountProxy.ProxyGroup}"
                        Header="{DynamicResource LangKeyGroup}"
                        IsReadOnly="True" />


                </DataGrid.Columns>
            </DataGrid>

        </Grid>
    </ControlTemplate>
</ResourceDictionary>