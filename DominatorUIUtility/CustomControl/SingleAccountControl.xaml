<Dialog:CustomDialog x:Class="DominatorUIUtility.CustomControl.SingleAccountControl"
                     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                     xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                     xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                     mc:Ignorable="d"
                     xmlns:validation="clr-namespace:DominatorHouseCore.Utility;assembly=DominatorHouseCore"
                     xmlns:Dialog="clr-namespace:MahApps.Metro.Controls.Dialogs;assembly=MahApps.Metro"
                     xmlns:Controls="http://metro.mahapps.com/winfx/xaml/controls"
                     xmlns:passwordHelper="clr-namespace:DominatorUIUtility.Behaviours">
    <Dialog:CustomDialog.Resources>
        <ControlTemplate x:Key="ErrorTemplate">
            <StackPanel Orientation="Horizontal">
                <AdornedElementPlaceholder x:Name="ErrorHolder">
                    <Border BorderBrush="red" BorderThickness="1" />
                </AdornedElementPlaceholder>
                <TextBlock VerticalAlignment="Center" FontWeight="Bold" Margin="10,0,0,0"
                           Text="{Binding ElementName=ErrorHolder, Path=AdornedElement.(Validation.Errors)[0].ErrorContent}"
                           Foreground="Red" />
            </StackPanel>
        </ControlTemplate>

    </Dialog:CustomDialog.Resources>
    <Grid VerticalAlignment="Top">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
            <RowDefinition Height="5*" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Grid Grid.Row="0">
            <TextBlock Name="txtblk_PageTitle" Text="{Binding PageTitle}" FontSize="16" FontWeight="Bold"
                       Foreground="#233140" VerticalAlignment="Center" HorizontalAlignment="Center" />
        </Grid>
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="2.5*" />
            </Grid.ColumnDefinitions>
            <TextBlock Name="txtblockGroupName" Text="{DynamicResource LangKeyGroupName}" Width="120" Margin="5"
                       FontSize="13" FontWeight="SemiBold" Foreground="Black" VerticalAlignment="Center" />
            <TextBox Name="txtGroupName" Text="{Binding GroupName}" Controls:TextBoxHelper.Watermark="Type Group Name"
                     Width="230" FontSize="13" FontWeight="SemiBold" Margin="5" Foreground="Black"
                     VerticalAlignment="Center" Height="30" Grid.Column="1" />
        </Grid>
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="2.5*" />
            </Grid.ColumnDefinitions>
            <TextBlock Name="txtblockUserName" Text="{DynamicResource LangKeyUsername}" Width="120" Margin="5"
                       FontSize="13" FontWeight="SemiBold" Foreground="Black" VerticalAlignment="Center" />
            <TextBox Name="txtUserName" Validation.ErrorTemplate="{StaticResource ErrorTemplate}"
                     Controls:TextBoxHelper.Watermark="Type User Name" Width="230" FontSize="13" FontWeight="SemiBold"
                     Margin="5" Foreground="Black" VerticalAlignment="Center" Height="30" Grid.Column="1">
                <TextBox.Text>
                    <Binding Path="UserName" UpdateSourceTrigger="PropertyChanged">
                        <Binding.ValidationRules>
                            <validation:ValidationHelper Sender="txtUserName" ValidatesOnTargetUpdated="True" />
                        </Binding.ValidationRules>
                    </Binding>
                </TextBox.Text>
            </TextBox>
        </Grid>
        <Grid Grid.Row="3">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="2.5*" />
            </Grid.ColumnDefinitions>
            <TextBlock Name="txtblockPassword" Text="{DynamicResource LangKeyPassword}" Width="120" FontSize="13"
                       Margin="5" FontWeight="SemiBold" Foreground="Black" VerticalAlignment="Center" />
            <PasswordBox Name="txtPassword" passwordHelper:PasswordBoxHelper.Attach="True"
                         Style="{StaticResource MetroButtonRevealedPasswordBox}"
                         Validation.ErrorTemplate="{StaticResource ErrorTemplate}"
                         Controls:TextBoxHelper.Watermark="Enter Password"
                         Width="230" FontSize="13" FontWeight="SemiBold" Margin="5" Foreground="Black"
                         VerticalAlignment="Center" Height="30" Grid.Column="1">
                <passwordHelper:PasswordBoxHelper.Password>
                    <Binding Path="Password" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay">
                        <Binding.ValidationRules>
                            <validation:ValidationHelper Sender="txtPassword" ValidatesOnTargetUpdated="True" />
                        </Binding.ValidationRules>
                    </Binding>
                </passwordHelper:PasswordBoxHelper.Password>

            </PasswordBox>
        </Grid>
        <Grid Grid.Row="4">
            <CheckBox Content="{DynamicResource LangKeyShowAdvance}" HorizontalAlignment="Left" Name="ShowAdvance"
                      IsChecked="{Binding ShowAdvancedSettings}" Width="120" FontWeight="SemiBold" Margin="6,0,0,5" />
        </Grid>
        <Grid Grid.Row="5" Visibility="{Binding AdvancedOptions}" Name="AdvanceOption" Margin="0,0,0,10">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="*" />
                <RowDefinition Height="*" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="2.5*" />
                </Grid.ColumnDefinitions>
                <TextBlock Name="txtblockProxyAddress" Text="{DynamicResource LangKeyProxyAddress}" Width="120"
                           Margin="5" FontSize="13" FontWeight="SemiBold" Foreground="Black" VerticalAlignment="Center" />
                <TextBox Name="txtProxyAddress" Validation.ErrorTemplate="{StaticResource ErrorTemplate}"
                         Controls:TextBoxHelper.Watermark="Format:{XXX.XXX.XXX.XXX}" Width="230" FontSize="13"
                         Margin="5" FontWeight="SemiBold" Foreground="Black" VerticalAlignment="Center" Height="30"
                         Grid.Column="1">
                    <TextBox.Text>
                        <Binding Path="AccountProxy.ProxyIp" UpdateSourceTrigger="PropertyChanged">
                            <Binding.ValidationRules>
                                <validation:ValidationHelper Sender="txtProxyAddress" ValidatesOnTargetUpdated="True" />
                            </Binding.ValidationRules>
                        </Binding>
                    </TextBox.Text>
                </TextBox>
            </Grid>
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="2.5*" />
                </Grid.ColumnDefinitions>
                <TextBlock Name="txtblockProxyPort" Text="{DynamicResource LangKeyProxyPort}" Margin="5" Width="120"
                           FontSize="13" FontWeight="SemiBold" Foreground="Black" VerticalAlignment="Center" />
                <TextBox Name="txtProxyPort" Validation.ErrorTemplate="{StaticResource ErrorTemplate}"
                         Controls:TextBoxHelper.Watermark="Type Proxy Port" Width="230" FontSize="13"
                         FontWeight="SemiBold" Margin="5" Foreground="Black" VerticalAlignment="Center" Height="30"
                         Grid.Column="1">
                    <TextBox.Text>
                        <Binding Path="AccountProxy.ProxyPort" UpdateSourceTrigger="PropertyChanged">
                            <Binding.ValidationRules>
                                <validation:ValidationHelper Sender="txtProxyPort" ValidatesOnTargetUpdated="True" />
                            </Binding.ValidationRules>
                        </Binding>
                    </TextBox.Text>
                </TextBox>
            </Grid>
            <Grid Grid.Row="2">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="2.5*" />
                </Grid.ColumnDefinitions>
                <TextBlock Name="txtblockProxyUserName" Text="{DynamicResource LangKeyProxyUsername}" Width="120"
                           FontSize="13" Margin="5" FontWeight="SemiBold" Foreground="Black" VerticalAlignment="Center" />
                <TextBox Name="txtProxyUserName" Text="{Binding AccountProxy.ProxyUsername}"
                         Controls:TextBoxHelper.Watermark="Type Proxy User Name" Width="230" FontSize="13"
                         FontWeight="SemiBold" Margin="5" Foreground="Black" VerticalAlignment="Center" Height="30"
                         Grid.Column="1" />
            </Grid>
            <Grid Grid.Row="3">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="2.5*" />
                </Grid.ColumnDefinitions>
                <TextBlock Name="txtblockProxyPassword" Text="{DynamicResource LangKeyProxyPassword}" Width="120"
                           FontSize="13" Margin="5,11" FontWeight="SemiBold" Foreground="Black"
                           VerticalAlignment="Center" />
                <TextBox Name="txtProxyPassword" Text="{Binding AccountProxy.ProxyPassword}"
                         Controls:TextBoxHelper.Watermark="Type Proxy Password" Width="230" FontSize="13"
                         FontWeight="SemiBold" Margin="5,5,4.693,5" Foreground="Black" VerticalAlignment="Center"
                         Height="30" Grid.Column="1" Grid.ColumnSpan="2" />
            </Grid>
        </Grid>
        <Grid Grid.Row="6">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <StackPanel Orientation="Horizontal" Grid.Column="1" HorizontalAlignment="Right">
                <Button x:Name="btnSave" x:FieldModifier="public" Margin="0,0,10,10" Content="{Binding BtnContent}">
                    <Button.Style>
                        <Style BasedOn="{StaticResource {x:Type Button}}" TargetType="Button">
                            <Setter Property="IsEnabled" Value="false" />
                            <Style.Triggers>
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition
                                            Binding="{Binding ElementName=txtUserName, Path=(Validation.HasError)}"
                                            Value="false" />
                                        <Condition
                                            Binding="{Binding ElementName=txtPassword, Path=(Validation.HasError)}"
                                            Value="false" />
                                        <Condition
                                            Binding="{Binding ElementName=txtProxyAddress, Path=(Validation.HasError)}"
                                            Value="false" />
                                        <Condition
                                            Binding="{Binding ElementName=txtProxyPort, Path=(Validation.HasError)}"
                                            Value="false" />
                                    </MultiDataTrigger.Conditions>
                                    <Setter Property="IsEnabled" Value="true" />
                                </MultiDataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
                <Button x:Name="btnCancel" x:FieldModifier="public" Margin="0,0,8,10"
                        Content="{DynamicResource LangKeyCancel}" />
            </StackPanel>
        </Grid>
    </Grid>

</Dialog:CustomDialog>