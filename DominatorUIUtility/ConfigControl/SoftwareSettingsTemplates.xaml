<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls">

    <TextBlock
        x:Key="TextNameSave"
        Name="txt"
        Text="{DynamicResource LangKeySave}" />

    <ControlTemplate x:Key="SoftwareSettingsControlTemplate">
        <ControlTemplate.Resources>
            <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
        </ControlTemplate.Resources>
        <GroupBox Background="Transparent" BorderThickness="0">
            <GroupBox.Header>
                <Border Background="{DynamicResource AccentBaseColorBrush}" CornerRadius="8,8,0,0">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <Label
                            Grid.Column="0"
                            HorizontalAlignment="Left"
                            Content="{DynamicResource LangKeyConfiguration}"
                            FontSize="20"
                            Foreground="White" />
                        <Button
                            Grid.Column="1"
                            Margin="0,0,8,0"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Command="{Binding SaveCmd}"
                            Cursor="Hand"
                            Foreground="White">
                            <Button.Template>
                                <ControlTemplate>
                                    <Border
                                        x:Name="SaveBtnBorder"
                                        Background="Green"
                                        CornerRadius="4">
                                        <StackPanel Margin="5,3" Orientation="Horizontal">
                                            <Rectangle
                                                Width="15"
                                                Height="15"
                                                Fill="White">
                                                <Rectangle.OpacityMask>
                                                    <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_save}" />
                                                </Rectangle.OpacityMask>
                                            </Rectangle>
                                            <AccessText Margin="6,0,0,0" Text="{DynamicResource LangKey_Save}" />
                                        </StackPanel>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="SaveBtnBorder" Property="Background" Value="LimeGreen" />
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>

                        </Button>
                    </Grid>
                </Border>
            </GroupBox.Header>
            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                <Grid>
                    <mah:ProgressRing IsActive="{Binding ProgressRing}" Visibility="{Binding ProgressRing, Converter={StaticResource BooleanToVisibilityConverter}}" />

                    <StackPanel>
                        <StackPanel Margin="10" DataContext="{Binding SoftwareSettingsModel}">
                            <CheckBox
                                Margin="5"
                                Content="{DynamicResource LangKeyRunSocinatorAtSystemStartup}"
                                IsChecked="{Binding IsRunDHAtStartUpChecked}"
                                Visibility="Collapsed" />
                            <CheckBox
                                Margin="5"
                                Content="{DynamicResource LangKeyShowToolTipWhenMinimizingToSystemTray}"
                                IsChecked="{Binding IsShowToolTipToSystemTrayChecked}"
                                Visibility="Collapsed" />
                            <CheckBox
                                Margin="5"
                                Content="{DynamicResource LangKeyRecreateDesktopShortcutAtStartup}"
                                IsChecked="{Binding IsRecreateDesktopshortcutAtStartupChecked}"
                                Visibility="Collapsed" />
                            <CheckBox
                                Margin="5"
                                Content="{DynamicResource LangKeyRunDifferentActivitiesOnTheSameAccountAtOnceRisksImplied}"
                                IsChecked="{Binding IsEnableParallelActivitiesChecked}" />
                            <!--<CheckBox Margin="5" Content="{DynamicResource LangKeyStopAutoSynchronizeAccount}"
                              IsChecked="{Binding IsStopAutoSynchronizeAccount}"/>-->
                            <StackPanel Margin="20,5" Visibility="{Binding IsEnableGlobalNightModeChecked, Converter={StaticResource BooleanToVisibilityConverter}}">
                                <StackPanel Orientation="Horizontal">
                                    <Label Margin="5" Content="{DynamicResource LangKeyRunDifferentActivitiesOnTheSameAccountAtOnceRisksImplied}" />
                                    <mah:NumericUpDown
                                        Margin="5"
                                        Minimum="0"
                                        Value="{Binding ExecuteAnyActionsBetween.StartValue}" />
                                    <Label Margin="5" Content="{DynamicResource LangKeyAnd}" />
                                    <mah:NumericUpDown
                                        Margin="5"
                                        Minimum="{Binding ExecuteAnyActionsBetween.StartValue}"
                                        Value="{Binding ExecuteAnyActionsBetween.EndValue}" />
                                </StackPanel>
                                <CheckBox
                                    Margin="5"
                                    Content="{DynamicResource LangKeyRandomiseNightMode}"
                                    IsChecked="{Binding IsRandomiseNightModeChecked}" />
                                <StackPanel Margin="20,5" Visibility="{Binding IsRandomiseNightModeChecked, Converter={StaticResource BooleanToVisibilityConverter}}">
                                    <StackPanel Orientation="Horizontal">
                                        <Label Margin="5" Content="{DynamicResource LangKeyStartBetween}" />
                                        <mah:NumericUpDown
                                            Margin="5"
                                            Minimum="0"
                                            Value="{Binding StartBetween.StartValue}" />
                                        <Label Margin="5" Content="{DynamicResource LangKeyAnd}" />
                                        <mah:NumericUpDown
                                            Margin="5"
                                            Minimum="{Binding StartBetween.StartValue}"
                                            Value="{Binding StartBetween.EndValue}" />
                                    </StackPanel>
                                    <StackPanel Margin="5" Orientation="Horizontal">
                                        <Label Margin="5" Content="{DynamicResource LangKeyEndBetween}" />
                                        <mah:NumericUpDown
                                            Margin="5"
                                            Minimum="0"
                                            Value="{Binding EndBetween.StartValue}" />
                                        <Label Margin="5" Content="{DynamicResource LangKeyAnd}" />
                                        <mah:NumericUpDown
                                            Margin="5"
                                            Minimum="{Binding EndBetween.StartValue}"
                                            Value="{Binding EndBetween.EndValue}" />
                                    </StackPanel>
                                    <Label Margin="5" Content="{DynamicResource LangKeyNoActionWillBeExecutedOnAnySocialProfileDuringSelectedTimeIntervalEachAccountHasItsOwnNightModeIfBetterPrecisionIsNeededSpecifyingANightModeForAnAccountDoesNotExemptThatAccountFromGlobalNightMode}" />
                                </StackPanel>
                                <CheckBox
                                    Margin="5"
                                    Content="{DynamicResource LangKeyAllowAccountThatSetTheirOwnNightModeToIgnoreGlobalNightMode}"
                                    IsChecked="{Binding IsIgnoreGlobalChecked}" />
                            </StackPanel>
                            <CheckBox
                                Margin="5"
                                Content="{DynamicResource LangKeyUseTabInsteadOfComma}"
                                IsChecked="{Binding IsUseTabInsteadOfCommaChecked}"
                                Visibility="Collapsed" />
                            <StackPanel Orientation="Horizontal" Visibility="Collapsed">
                                <CheckBox
                                    Margin="5"
                                    Content="{DynamicResource LangKeyEnableAutoRestartSocinatorAfterAMinimumOf}"
                                    IsChecked="{Binding IsEnableAutoRestartSocinatorChecked}" />
                                <mah:NumericUpDown
                                    Margin="5"
                                    IsEnabled="{Binding IsEnableAutoRestartSocinatorChecked}"
                                    Minimum="0"
                                    Value="{Binding MinHour}" />
                                <Label Margin="5" Content="{DynamicResource LangKeyHours}" />
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <CheckBox
                                    Margin="5"
                                    Content="{DynamicResource LangKeySynchronizeAccountInformationsEvery}"
                                    IsChecked="{Binding IsStopAutoSynchronizeAccount}" />
                                <mah:NumericUpDown
                                    Margin="5"
                                    Minimum="0"
                                    Value="{Binding AccountSynchronizationHours}" />
                                <Label Margin="5" Content="{DynamicResource LangKeyHours}" />
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Margin="5" Text="{DynamicResource LangKeyNumberOfAccountsToSynchronizeSimultaneously}" />
                                <mah:NumericUpDown
                                    Margin="5"
                                    Minimum="1"
                                    Value="{Binding SimultaneousAccountUpdateCount}" />
                            </StackPanel>
                            <CheckBox
                                Margin="5"
                                Content="{DynamicResource LangKeyEnableAdvancedUserMode}"
                                IsChecked="{Binding IsEnableAdvancedUserMode}" />
                            <CheckBox
                                Margin="5"
                                Content="{DynamicResource LangKeyDoNotAutoLoginAccountsWhileAddingToSoftware}"
                                IsChecked="{Binding IsDoNotAutoLoginAccountsWhileAddingToSoftware}" />
                            <StackPanel Orientation="Horizontal">
                                <CheckBox
                                    Margin="5"
                                    Content="{DynamicResource LangKeyMaxThreadsToRun}"
                                    IsChecked="{Binding IsThreadLimitChecked}" />
                                <mah:NumericUpDown
                                    Margin="5"
                                    IsEnabled="{Binding IsThreadLimitChecked}"
                                    Minimum="1"
                                    Value="{Binding MaxThreadCount}" />
                            </StackPanel>
                            <StackPanel Margin="5" Orientation="Horizontal">
                                <CheckBox
                                    Name="IsDefaultPath"
                                    Content="{DynamicResource LangKeyDefaultExportPath}"
                                    IsChecked="{Binding IsDefaultExportPathSelected}" />
                                <TextBox
                                    Width="200"
                                    Margin="5"
                                    HorizontalAlignment="Left"
                                    mah:TextBoxHelper.ButtonCommand="{Binding DataContext.ExportCommand, RelativeSource={RelativeSource AncestorType={x:Type GroupBox}}}"
                                    Text="{Binding ExportPath, Mode=TwoWay}"
                                    Visibility="{Binding IsDefaultExportPathSelected, Converter={StaticResource BooleanToVisibilityConverter}}">
                                    <TextBox.Style>
                                        <Style BasedOn="{StaticResource ButtonCommandMetroTextBox}" TargetType="{x:Type TextBox}">
                                            <Setter Property="mah:TextBoxHelper.ButtonTemplate">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="{x:Type Button}">
                                                        <Grid Background="{TemplateBinding Background}">
                                                            <Grid
                                                                x:Name="contentPresenter"
                                                                Margin="{TemplateBinding Padding}"
                                                                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                                VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                                Opacity="0.75"
                                                                SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}">

                                                                <Canvas
                                                                    Width="15"
                                                                    Height="15"
                                                                    Clip="F1 M 0,0L 48,0L 48,48L 0,48L 0,0">
                                                                    <Path
                                                                        Width="15.7781"
                                                                        Height="15.7781"
                                                                        Data="F1 M 16.6668,20L 13,28.5336L 13,16L 23,16L 23,15C 23,13.8954 23.8954,13 25,13L 32,13C 33.1046,13 35,14.8954 35,16L 35,20L 16.6668,20 Z M 35,32L 28,32L 13,32L 17.5833,21L 39.5833,21L 35,32 Z "
                                                                        Fill="{TemplateBinding Foreground}"
                                                                        Stretch="Fill" />
                                                                </Canvas>
                                                            </Grid>
                                                        </Grid>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </TextBox.Style>
                                </TextBox>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Margin="5" Text="{DynamicResource LangKeyRunQueries}" />
                                <RadioButton
                                    Margin="5"
                                    Content="{DynamicResource LangKeyTopToBottom}"
                                    GroupName="RunQueryGroup"
                                    IsChecked="{Binding RunQueriesTopToBottom}" />
                                <RadioButton
                                    Margin="5"
                                    Content="{DynamicResource LangKeyBottomToTop}"
                                    GroupName="RunQueryGroup"
                                    IsChecked="{Binding RunQueriesBottomToTop}" />
                                <RadioButton
                                    Margin="5"
                                    Content="{DynamicResource LangKeyRandomly}"
                                    GroupName="RunQueryGroup"
                                    IsChecked="{Binding RunQueriesRandomly}" />
                            </StackPanel>
                            <CheckBox
                                Margin="5"
                                Content="{DynamicResource LangKeyStopIfNoMoreData}"
                                IsChecked="{Binding StopIfNoMoreData}" />

                            <StackPanel Orientation="Horizontal">
                                <CheckBox
                                    Margin="5"
                                    Content="{DynamicResource LangKeySelectCountriesFilter}"
                                    IsChecked="{Binding IsSelectCountriesFilter}" />
                                <ComboBox
                                    Width="200"
                                    Height="30"
                                    IsEditable="True"
                                    ItemsSource="{Binding Path=ListLocationModelTemp}"
                                    Text="{Binding DataContext.SearchText, RelativeSource={RelativeSource AncestorType=GroupBox}}"
                                    VirtualizingPanel.IsContainerVirtualizable="True">
                                    <ComboBox.ItemTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal">
                                                <CheckBox IsChecked="{Binding IsSelected}" />
                                                <TextBlock Text="{Binding CountryName}" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </ComboBox.ItemTemplate>
                                    <ComboBox.Triggers>
                                        <EventTrigger RoutedEvent="TextBoxBase.TextChanged">
                                            <BeginStoryboard>
                                                <Storyboard>
                                                    <BooleanAnimationUsingKeyFrames Storyboard.TargetProperty="IsDropDownOpen">
                                                        <DiscreteBooleanKeyFrame KeyTime="0:0:0" Value="True" />
                                                    </BooleanAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </EventTrigger>
                                    </ComboBox.Triggers>
                                </ComboBox>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <CheckBox
                                    Margin="5"
                                    Content="{DynamicResource LangKeyDoNotSortAccountsBy}"
                                    IsChecked="{Binding DoNotSortByUserNameChecked}" />
                                <RadioButton
                                    Margin="5"
                                    Content="{DynamicResource LangKeyAccountUsername}"
                                    GroupName="SortAccountGroup"
                                    IsChecked="{Binding SortByUsername}" />
                                <RadioButton
                                    Margin="5"
                                    Content="{DynamicResource LangKeyAccountNikeName}"
                                    GroupName="SortAccountGroup"
                                    IsChecked="{Binding SortByNikename}" />
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <CheckBox
                                    Margin="5"
                                    Content="{DynamicResource LangKeySkipAlreadyProcessedQueryValue}"
                                    IsChecked="{Binding SkipAlreadyProcessedQueryValue}" />
                            </StackPanel>
                            <Expander
                                BorderThickness="1"
                                Foreground="{DynamicResource GreenColorAccordingTheme}"
                                Header="Developer options"
                                Visibility="Collapsed">
                                <!--  {Binding DebugVisibility}  -->
                                <StackPanel>
                                    <!--<CheckBox Margin="5" Content="Modify response files in UnitTests as per respective http hit"
                                  IsChecked="{Binding IsTestMode}"/>-->

                                    <mah:ToggleSwitch
                                        Margin="5"
                                        FontSize="12"
                                        IsChecked="{Binding DebugRespData, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                        OffLabel="Deactivated Debugging Response"
                                        OnLabel="Activated Debugging Response"
                                        Style="{StaticResource MahApps.Metro.Styles.ToggleSwitch.Win10}" />
                                </StackPanel>
                            </Expander>
                        </StackPanel>
                    </StackPanel>
                </Grid>
            </ScrollViewer>
        </GroupBox>
    </ControlTemplate>
</ResourceDictionary>