<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <ControlTemplate x:Key="SocinatorMacrosControlTemplate">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Grid Grid.Row="0">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock
                            Width="65"
                            Margin="5"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Text="{DynamicResource LangKeyMacroKey}" />
                        <TextBox
                            Width="350"
                            Margin="5"
                            Background="Transparent"
                            Text="{Binding InputMacro.Key}" />
                    </StackPanel>

                    <StackPanel Orientation="Horizontal">
                        <TextBlock
                            Width="65"
                            Margin="5"
                            Text="{DynamicResource LangKeyMacroValue}" />
                        <TextBox
                            Width="350"
                            Margin="5"
                            Background="Transparent"
                            Text="{Binding InputMacro.Value}" />
                    </StackPanel>

                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
                        <Border
                            Margin="5"
                            VerticalAlignment="Center"
                            Background="{DynamicResource AccentBaseColorBrush}"
                            CornerRadius="5">
                            <Button
                                Background="Transparent"
                                Command="{Binding SaveMacrosCommand}"
                                CommandParameter="{Binding}"
                                Cursor="Hand"
                                Foreground="White"
                                Tag="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}">
                                <Button.Template>
                                    <ControlTemplate>
                                        <Border HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                            <StackPanel
                                                Width="70"
                                                Margin="5,3"
                                                Orientation="Horizontal">
                                                <Rectangle
                                                    Width="15"
                                                    Height="15"
                                                    Margin="3"
                                                    Fill="White">
                                                    <Rectangle.OpacityMask>
                                                        <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_save}" />
                                                    </Rectangle.OpacityMask>
                                                </Rectangle>
                                                <Label
                                                    Margin="0,0,0,0"
                                                    VerticalContentAlignment="Center"
                                                    Content="{DynamicResource LangKeySave}"
                                                    FontSize="13"
                                                    FontWeight="SemiBold"
                                                    Foreground="White" />
                                            </StackPanel>
                                        </Border>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>
                        </Border>

                        <Border
                            Margin="5"
                            VerticalAlignment="Center"
                            Background="{DynamicResource AccentBaseColorBrush}"
                            CornerRadius="5">
                            <Button
                                Background="Transparent"
                                Command="{Binding ImportMacrosCammand}"
                                CommandParameter="{Binding}"
                                Cursor="Hand"
                                Foreground="White"
                                Tag="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}">
                                <Button.Template>
                                    <ControlTemplate>
                                        <Border HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                            <StackPanel
                                                Width="70"
                                                Margin="5,3"
                                                Orientation="Horizontal">
                                                <Rectangle
                                                    Width="15"
                                                    Height="15"
                                                    Margin="3"
                                                    Fill="White">
                                                    <Rectangle.OpacityMask>
                                                        <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_inbox_in}" />
                                                    </Rectangle.OpacityMask>
                                                </Rectangle>
                                                <Label
                                                    Margin="0,0,0,0"
                                                    VerticalContentAlignment="Center"
                                                    Content="{DynamicResource LangKeyImport}"
                                                    FontSize="13"
                                                    FontWeight="SemiBold"
                                                    Foreground="White" />
                                            </StackPanel>
                                        </Border>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>
                        </Border>

                    </StackPanel>
                </StackPanel>
            </Grid>

            <Grid Grid.Row="1">
                <GroupBox
                    Margin="2"
                    HorizontalAlignment="Stretch"
                    Header="{DynamicResource LangKeyMacroSList}">
                    <GroupBox.Style>
                        <Style BasedOn="{StaticResource {x:Type GroupBox}}" TargetType="GroupBox">
                            <Setter Property="Visibility" Value="Visible" />
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding MacrosCollection.Count}" Value="0">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </GroupBox.Style>
                    <DataGrid
                        AlternationCount="{Binding Items.Count, RelativeSource={RelativeSource Self}}"
                        AutoGenerateColumns="False"
                        CanUserAddRows="False"
                        CanUserDeleteRows="False"
                        GridLinesVisibility="All"
                        HorizontalScrollBarVisibility="Auto"
                        IsReadOnly="True"
                        ItemsSource="{Binding MacrosCollection}"
                        VerticalScrollBarVisibility="Auto">

                        <DataGrid.Columns>
                            <DataGridTemplateColumn
                                Width="80"
                                Header="{DynamicResource LangKeyActions}"
                                IsReadOnly="True">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Button
                                            Width="40"
                                            Height="25"
                                            Margin="10,0"
                                            VerticalAlignment="Top"
                                            Background="White"
                                            Command="{Binding DataContext.DeleteCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGrid}}}"
                                            CommandParameter="{Binding}">
                                            <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
                                                <Rectangle
                                                    Width="12"
                                                    Height="15"
                                                    Fill="{DynamicResource AccentBaseColorBrush}">
                                                    <Rectangle.OpacityMask>
                                                        <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_delete}" />
                                                    </Rectangle.OpacityMask>
                                                </Rectangle>
                                            </StackPanel>
                                        </Button>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn
                                Width="100"
                                Header="{DynamicResource LangKeyMacroKey}"
                                IsReadOnly="True">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Margin="4" Text="{Binding Key}" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTemplateColumn
                                Width="*"
                                Header="{DynamicResource LangKeyMacroValue}"
                                IsReadOnly="True">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Margin="4" Text="{Binding Value}" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>

                </GroupBox>
            </Grid>
        </Grid>
    </ControlTemplate>
</ResourceDictionary>